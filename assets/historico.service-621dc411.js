var w=Object.defineProperty;var C=(n,t,e)=>t in n?w(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var d=(n,t,e)=>(C(n,typeof t!="symbol"?t+"":t,e),e),b=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var p=(n,t,e)=>(b(n,t,"read from private field"),e?e.call(n):t.get(n)),m=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)};import{a2 as _}from"./index-410d9f0c.js";var c={},f={},A={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.keyComparer=n.composeComparers=n.negate=n.equal=n.isObj=void 0,n.isObj=function(t){return!!t&&typeof t=="object"},n.equal=function(t,e){return Object.entries(t).every(function(r){var o=r[0],i=r[1];return n.isObj(i)?n.equal(e[o],i):e[o]===i})},n.negate=function(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return!t.apply(void 0,e)}},n.composeComparers=function(t,e){return function(r,o){return t(r,o)||e(r,o)}},n.keyComparer=function(t,e){return function(r,o){var i=t(r),s=t(o);return i>s?e?-1:1:i<s?e?1:-1:0}}})(A);var S=_&&_.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(f,"__esModule",{value:!0});var u=A,O=function(){function n(t){t===void 0&&(t=[]),this._elements=t}return n.prototype.Add=function(t){this._elements.push(t)},n.prototype.Append=function(t){this.Add(t)},n.prototype.Prepend=function(t){this._elements.unshift(t)},n.prototype.AddRange=function(t){var e;(e=this._elements).push.apply(e,t)},n.prototype.Aggregate=function(t,e){return this._elements.reduce(t,e)},n.prototype.All=function(t){return this._elements.every(t)},n.prototype.Any=function(t){return t?this._elements.some(t):this._elements.length>0},n.prototype.Average=function(t){return this.Sum(t)/this.Count(t)},n.prototype.Cast=function(){return new n(this._elements)},n.prototype.Clear=function(){this._elements.length=0},n.prototype.Concat=function(t){return new n(this._elements.concat(t.ToArray()))},n.prototype.Contains=function(t){return this.Any(function(e){return e===t})},n.prototype.Count=function(t){return t?this.Where(t).Count():this._elements.length},n.prototype.DefaultIfEmpty=function(t){return this.Count()?this:new n([t])},n.prototype.Distinct=function(){return this.Where(function(t,e,r){return(u.isObj(t)?r.findIndex(function(o){return u.equal(o,t)}):r.indexOf(t))===e})},n.prototype.DistinctBy=function(t){var e=this.GroupBy(t);return Object.keys(e).reduce(function(r,o){return r.Add(e[o][0]),r},new n)},n.prototype.ElementAt=function(t){if(t<this.Count()&&t>=0)return this._elements[t];throw new Error("ArgumentOutOfRangeException: index is less than 0 or greater than or equal to the number of elements in source.")},n.prototype.ElementAtOrDefault=function(t){return t<this.Count()&&t>=0?this._elements[t]:void 0},n.prototype.Except=function(t){return this.Where(function(e){return!t.Contains(e)})},n.prototype.First=function(t){if(this.Count())return t?this.Where(t).First():this._elements[0];throw new Error("InvalidOperationException: The source sequence is empty.")},n.prototype.FirstOrDefault=function(t){return this.Count(t)?this.First(t):void 0},n.prototype.ForEach=function(t){return this._elements.forEach(t)},n.prototype.GroupBy=function(t,e){e===void 0&&(e=function(o){return o});var r={};return this.Aggregate(function(o,i){var s=t(i),h=o[s],y=e(i);return h?h.push(y):o[s]=[y],o},r)},n.prototype.GroupJoin=function(t,e,r,o){return this.Select(function(i){return o(i,t.Where(function(s){return e(i)===r(s)}))})},n.prototype.IndexOf=function(t){return this._elements.indexOf(t)},n.prototype.Insert=function(t,e){if(t<0||t>this._elements.length)throw new Error("Index is out of range.");this._elements.splice(t,0,e)},n.prototype.Intersect=function(t){return this.Where(function(e){return t.Contains(e)})},n.prototype.Join=function(t,e,r,o){return this.SelectMany(function(i){return t.Where(function(s){return r(s)===e(i)}).Select(function(s){return o(i,s)})})},n.prototype.Last=function(t){if(this.Count())return t?this.Where(t).Last():this._elements[this.Count()-1];throw Error("InvalidOperationException: The source sequence is empty.")},n.prototype.LastOrDefault=function(t){return this.Count(t)?this.Last(t):void 0},n.prototype.Max=function(t){var e=function(r){return r};return Math.max.apply(Math,this._elements.map(t||e))},n.prototype.Min=function(t){var e=function(r){return r};return Math.min.apply(Math,this._elements.map(t||e))},n.prototype.OfType=function(t){var e;switch(t){case Number:e="number";break;case String:e="string";break;case Boolean:e="boolean";break;case Function:e="function";break;default:e=null;break}return e===null?this.Where(function(r){return r instanceof t}).Cast():this.Where(function(r){return typeof r===e}).Cast()},n.prototype.OrderBy=function(t,e){return e===void 0&&(e=u.keyComparer(t,!1)),new v(this._elements,e)},n.prototype.OrderByDescending=function(t,e){return e===void 0&&(e=u.keyComparer(t,!0)),new v(this._elements,e)},n.prototype.ThenBy=function(t){return this.OrderBy(t)},n.prototype.ThenByDescending=function(t){return this.OrderByDescending(t)},n.prototype.Remove=function(t){return this.IndexOf(t)!==-1?(this.RemoveAt(this.IndexOf(t)),!0):!1},n.prototype.RemoveAll=function(t){return this.Where(u.negate(t))},n.prototype.RemoveAt=function(t){this._elements.splice(t,1)},n.prototype.Reverse=function(){return new n(this._elements.reverse())},n.prototype.Select=function(t){return new n(this._elements.map(t))},n.prototype.SelectMany=function(t){var e=this;return this.Aggregate(function(r,o,i){return r.AddRange(e.Select(t).ElementAt(i).ToArray()),r},new n)},n.prototype.SequenceEqual=function(t){return this.All(function(e){return t.Contains(e)})},n.prototype.Single=function(t){if(this.Count(t)!==1)throw new Error("The collection does not contain exactly one element.");return this.First(t)},n.prototype.SingleOrDefault=function(t){return this.Count(t)?this.Single(t):void 0},n.prototype.Skip=function(t){return new n(this._elements.slice(Math.max(0,t)))},n.prototype.SkipLast=function(t){return new n(this._elements.slice(0,-Math.max(0,t)))},n.prototype.SkipWhile=function(t){var e=this;return this.Skip(this.Aggregate(function(r){return t(e.ElementAt(r))?++r:r},0))},n.prototype.Sum=function(t){return t?this.Select(t).Sum():this.Aggregate(function(e,r){return e+=+r},0)},n.prototype.Take=function(t){return new n(this._elements.slice(0,Math.max(0,t)))},n.prototype.TakeLast=function(t){return new n(this._elements.slice(-Math.max(0,t)))},n.prototype.TakeWhile=function(t){var e=this;return this.Take(this.Aggregate(function(r){return t(e.ElementAt(r))?++r:r},0))},n.prototype.ToArray=function(){return this._elements},n.prototype.ToDictionary=function(t,e){var r=this;return this.Aggregate(function(o,i,s){return o[r.Select(t).ElementAt(s).toString()]=e?r.Select(e).ElementAt(s):i,o.Add({Key:r.Select(t).ElementAt(s),Value:e?r.Select(e).ElementAt(s):i}),o},new n)},n.prototype.ToList=function(){return this},n.prototype.ToLookup=function(t,e){return this.GroupBy(t,e)},n.prototype.Union=function(t){return this.Concat(t).Distinct()},n.prototype.Where=function(t){return new n(this._elements.filter(t))},n.prototype.Zip=function(t,e){var r=this;return t.Count()<this.Count()?t.Select(function(o,i){return e(r.ElementAt(i),o)}):this.Select(function(o,i){return e(o,t.ElementAt(i))})},n}(),v=function(n){S(t,n);function t(e,r){var o=n.call(this,e)||this;return o._comparer=r,o._elements.sort(o._comparer),o}return t.prototype.ThenBy=function(e){return new t(this._elements,u.composeComparers(this._comparer,u.keyComparer(e,!1)))},t.prototype.ThenByDescending=function(e){return new t(this._elements,u.composeComparers(this._comparer,u.keyComparer(e,!0)))},t}(O);f.default=O;var l={};Object.defineProperty(l,"__esModule",{value:!0});var g=f,k=function(){function n(){}return n.Range=function(t,e){for(var r=new g.default;e--;)r.Add(t++);return r},n.Repeat=function(t,e){for(var r=new g.default;e--;)r.Add(t);return r},n}();l.default=k;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=f;Object.defineProperty(n,"List",{enumerable:!0,get:function(){return t.default}});var e=l;Object.defineProperty(n,"Enumerable",{enumerable:!0,get:function(){return e.default}})})(c);var a;class E{constructor(){m(this,a,"__SAFE_HISTORICO__")}atualiza(t){const e=this.listar(),r=e.find(o=>o.rota===t.rota);r?(r.acessado=t.acessado,r.acessadoDataHora=t.acessadoDataHora,r.favoritado=t.favoritado,r.rota=t.rota):e.push(t),this._persistir(e)}listar(){return JSON.parse(localStorage.getItem(p(this,a))??"[]").filter(e=>e.rota!=="pagina-inicial")}obter(t){return this.listar().find(r=>r.rota===t)}remover(t){const e=this.listar(),r=e.findIndex(o=>o.rota===t);e.splice(r,1),this._persistir(e)}_persistir(t){const e=t.filter(r=>r.rota!=="pagina-inicial");localStorage.setItem(p(this,a),JSON.stringify(e))}}a=new WeakMap;class B{constructor(){d(this,"_repository");this._repository=new E}obter(){const t=this._repository.listar(),e=new c.List(t).Where(i=>i!==void 0&&i.favoritado===!0).OrderByDescending(i=>i.acessadoDataHora).Take(5).ToArray(),r=new c.List(t).Where(i=>i!==void 0&&i.acessado!==null&&i.acessado>0).OrderByDescending(i=>i.acessado).Take(5).ToArray(),o=new c.List(t).Where(i=>i!==void 0&&i.acessado!==null&&i.acessado>0&&i.acessadoDataHora!==null).OrderByDescending(i=>i.acessadoDataHora).Take(5).ToArray();return{favoritos:e,maisAcessados:r,recentes:o}}obterPorRota(t){return this._repository.obter(t)}atualiza(t,e){const r=this.obterPorRota(e)??{rota:e};switch(t){case"acesso":r.acessado??(r.acessado=0),r.acessado++,r.acessadoDataHora=new Date().toISOString();break;case"desfavoritar":r.favoritado=!1;break;case"favoritar":r.favoritado=!0;break}this._repository.atualiza(r)}remover(t,e){const r=this.obterPorRota(e)??{rota:e};switch(t){case"favoritos":r.favoritado=!1;break;case"maisAcessados":r.acessado=0;break;case"recentes":r.acessadoDataHora=null;break}this._repository.atualiza(r)}}export{B as H};
