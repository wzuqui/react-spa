import{a as f,p as ht,C as Te,d as G,e as h,i as ti,b as E,f as ei,r as ii,c as Oe,O as Ae,g as d,$ as l,h as ni,j as A,k as xe,_ as St,l as V,W as Ie,m as ai,V as Dt,n as k,G as ut,o as F,q as _,s as si,D as Be,t as we,u as De,v as w,w as W,x as I,y as L,z as kt,A as Tt,B as j,E as oi,F as S,H as z,I as ke,J as $,K as ri,L as at,M as Vt,N as Rt,P as Pt,Q as Mt,R as K,S as li,T as hi,U as ui,X as st,Y as di,Z as Ve,a0 as Re,a1 as _t,a2 as Ot,a3 as N,a4 as ot,a5 as m,a6 as ci,a7 as P,a8 as pi,a9 as _i,aa as fi,ab as $t,ac as vi,ad as mi,ae as Ht,af as ft,ag as At,ah as D,ai as Lt,aj as X,ak as gi,al as R,am as Nt,an as Ci,ao as Ei,ap as rt,aq as bi,ar as vt,as as yi,at as Ft,au as Si,av as Ti,aw as Oi,ax as Ai,ay as zt,az as Wt,aA as Y,aB as Kt,aC as xi,aD as Ii,aE as Bi,aF as wi,aG as Di,aH as ki,aI as Gt,aJ as Vi,aK as Ri,aL as Pi,aM as Ut,aN as Mi,aO as $i,aP as Hi,aQ as Li,aR as Ni,aS as Fi,aT as bt,aU as U,aV as zi,aW as dt}from"./index-96b7358e.js";var Pe="dxHoverStart",xt="dxhoverstart",Wi=f(ht.enter,Pe),Me="dxHoverEnd",It="dxhoverend",Ki=f(ht.leave,Me),$e=Te.inherit({noBubble:!0,ctor:function(){this._handlerArrayKeyPath=this._eventNamespace+"_HandlerStore"},setup:function(t){G(t,this._handlerArrayKeyPath,{})},add:function(t,e){var i=this,n=function(a){i._handler(a)};h.on(t,this._originalEventName,e.selector,n),G(t,this._handlerArrayKeyPath)[e.guid]=n},_handler:function(t){ti(t)||E.isSimulator()||ei({type:this._eventName,originalEvent:t,delegateTarget:t.delegateTarget})},remove:function(t,e){var i=G(t,this._handlerArrayKeyPath)[e.guid];h.off(t,this._originalEventName,e.selector,i)},teardown:function(t){ii(t,this._handlerArrayKeyPath)}}),Gi=$e.inherit({ctor:function(){this._eventNamespace=Pe,this._eventName=xt,this._originalEventName=Wi,this.callBase()},_handler:function(t){var e=t.pointers||[];e.length||this.callBase(t)}}),Ui=$e.inherit({ctor:function(){this._eventNamespace=Me,this._eventName=It,this._originalEventName=Ki,this.callBase()}});Oe(xt,new Gi);Oe(It,new Ui);var q="dx-invalid-message",ji="dx-invalid-message-auto",Xi="dx-invalid-message-always",Yi="dx-invalid-message-content",qi=100,He=Ae.inherit({_getDefaultOptions(){return d(this.callBase(),{integrationOptions:{},templatesRenderAsynchronously:!1,shading:!1,width:"auto",height:"auto",hideOnOutsideClick:!1,animation:null,visible:!0,propagateOutsideClick:!0,_checkParentVisibility:!1,rtlEnabled:!1,contentTemplate:this._renderInnerHtml,maxWidth:"100%",container:this.$element(),target:void 0,mode:"auto",validationErrors:void 0,positionSide:"top",boundary:void 0,offset:{h:0,v:0},contentId:void 0})},_init(){this.callBase(),this.updateMaxWidth(),this._updatePosition()},_initMarkup(){this.callBase(),this._ensureMessageNotEmpty(),this._updatePositionByTarget(),this._toggleModeClass(),this._updateContentId()},_updatePositionByTarget:function(){var{target:t}=this.option();this.option("position.of",t)},_ensureMessageNotEmpty:function(){this._textMarkup=this._getTextMarkup();var t=this.option("visible")&&this._textMarkup;this._toggleVisibilityClasses(t)},_toggleVisibilityClasses:function(t){t?(this.$element().addClass(q),this.$wrapper().addClass(q)):(this.$element().removeClass(q),this.$wrapper().removeClass(q))},_updateContentId(){var{container:t,contentId:e}=this.option(),i=e??l(t).attr("aria-describedby");this.$content().addClass(Yi).attr("id",i)},_renderInnerHtml(t){var e=t&&l(t);e==null||e.html(this._textMarkup)},_getTextMarkup(){var t,e=(t=this.option("validationErrors"))!==null&&t!==void 0?t:[],i="";return e.forEach(n=>{var a,s=i?"<br />":"";i+=s+ni((a=n==null?void 0:n.message)!==null&&a!==void 0?a:"")}),i},_toggleModeClass(){var t=this.option("mode");this.$wrapper().toggleClass(ji,t==="auto").toggleClass(Xi,t==="always")},updateMaxWidth(){var t=this.option("target"),e=A(t),i="100%";e&&(i=Math.max(e,qi)),this.option({maxWidth:i})},_getPositionsArray:function(t,e){switch(t){case"top":return["".concat(e," bottom"),"".concat(e," top")];case"left":return["right","left"];case"right":return["left","right"];default:return["".concat(e," top"),"".concat(e," bottom")]}},_updatePosition:function(){var{positionSide:t,rtlEnabled:e,offset:i,boundary:n}=this.option(),a=xe(e),s=this._getPositionsArray(t,a),r=St({},i);this.$element().addClass("dx-invalid-message-".concat(t)),e&&t!=="left"&&t!=="right"&&(r.h=-r.h),t==="top"&&(r.v=-r.v),t==="left"&&(r.h=-r.h),this.option("position",{offset:r,boundary:n,my:s[0],at:s[1],collision:"none flip"})},_optionChanged(t){var{name:e,value:i,previousValue:n}=t;switch(e){case"target":this._updatePositionByTarget(),this.updateMaxWidth(),this.callBase(t);break;case"boundary":this.option("position.boundary",i);break;case"mode":this._toggleModeClass(i);break;case"rtlEnabled":case"offset":case"positionSide":this.$element().removeClass("dx-invalid-message-".concat(n)),this._updatePosition();break;case"container":this._updateContentId(),this.callBase(t);break;case"contentId":this._updateContentId();break;case"validationErrors":this._ensureMessageNotEmpty(),this._renderInnerHtml(this.$content());break;default:this.callBase(t)}}});V("dxValidationMessage",He);const Zi=He;var jt="dx-invalid-message-auto",Qi="dx-state-readonly",Ji="dx-invalid",tn="dx-show-invalid-badge",Xt="dx-validation-target",en="valid",Yt="invalid",nn="editorReadOnly",an=["outlined","filled","underlined"],qt={validationMessageMode:"mode",validationMessagePosition:"positionSide",validationMessageOffset:"offset",validationBoundary:"boundary"},yt=Ie.inherit({ctor:function(){this.showValidationMessageTimeout=null,this.validationRequest=ai(),this.callBase.apply(this,arguments)},_createElement:function(t){this.callBase(t);var e=this.$element();e&&G(e[0],Xt,this)},_initOptions:function(t){this.callBase.apply(this,arguments),this.option(Dt.initValidationOptions(t))},_init:function(){this.callBase(),this._options.cache("validationTooltipOptions",this.option("validationTooltipOptions"));var t=this.$element();t.addClass(tn)},_getDefaultOptions:function(){return d(this.callBase(),{value:null,name:"",onValueChanged:null,readOnly:!1,isValid:!0,validationError:null,validationErrors:null,validationStatus:en,validationMessageMode:"auto",validationMessagePosition:"bottom",validationBoundary:void 0,validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})},_attachKeyboardEvents:function(){this.option("readOnly")||this.callBase()},_setOptionsByReference:function(){this.callBase(),d(this._optionsByReference,{validationError:!0})},_createValueChangeAction:function(){this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})},_suppressValueChangeAction:function(){this._valueChangeActionSuppressed=!0},_resumeValueChangeAction:function(){this._valueChangeActionSuppressed=!1},_initMarkup:function(){var t;this._toggleReadOnlyState(),this._setSubmitElementName(this.option("name")),this.callBase(),this._renderValidationState(),(t=this.option("_onMarkupRendered"))===null||t===void 0||t()},_raiseValueChangeAction:function(t,e){this._valueChangeAction||this._createValueChangeAction(),this._valueChangeAction(this._valueChangeArgs(t,e))},_valueChangeArgs:function(t,e){return{value:t,previousValue:e,event:this._valueChangeEventInstance}},_saveValueChangeEvent:function(t){this._valueChangeEventInstance=t},_focusInHandler:function(t){var e=this.option("validationMessageMode")==="auto";if(this._canValueBeChangedByClick()&&e){var i,n=(i=this._validationMessage)===null||i===void 0?void 0:i.$wrapper();n==null||n.removeClass(jt),clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>n==null?void 0:n.addClass(jt),150)}return this.callBase(t)},_canValueBeChangedByClick:function(){return!1},_getStylingModePrefix:function(){return"dx-editor-"},_renderStylingMode:function(){var t=this.option("stylingMode"),e=this._getStylingModePrefix(),i=an.map(r=>e+r);i.forEach(r=>this.$element().removeClass(r));var n=e+t;if(i.indexOf(n)===-1){var a=this._getDefaultOptions().stylingMode,s=this._convertRulesToOptions(this._defaultOptionsRules()).stylingMode;n=e+(s||a)}this.$element().addClass(n)},_getValidationErrors:function(){var t=this.option("validationErrors");return!t&&this.option("validationError")&&(t=[this.option("validationError")]),t},_disposeValidationMessage:function(){this._$validationMessage&&(this._$validationMessage.remove(),this.setAria("describedby",null),this._$validationMessage=void 0,this._validationMessage=void 0)},_toggleValidationClasses:function(t){this.$element().toggleClass(Ji,t),this.setAria(Yt,t||void 0)},_renderValidationState:function(){var t=this.option("isValid")&&this.option("validationStatus")!==Yt,e=this._getValidationErrors(),i=this.$element();if(this._toggleValidationClasses(!t),!!k()&&(this._disposeValidationMessage(),!t&&e)){var{validationMessageMode:n,validationMessagePosition:a,validationMessageOffset:s,validationBoundary:r,rtlEnabled:u}=this.option();this._$validationMessage=l("<div>").appendTo(i);var c="dx-".concat(new ut);this.setAria("describedby",c),this._validationMessage=new Zi(this._$validationMessage,d({validationErrors:e,rtlEnabled:u,target:this._getValidationMessageTarget(),visualContainer:i,mode:n,positionSide:a,offset:s,boundary:r,contentId:c},this._options.cache("validationTooltipOptions"))),this._bindInnerWidgetOptions(this._validationMessage,"validationTooltipOptions")}},_getValidationMessageTarget:function(){return this.$element()},_toggleReadOnlyState:function(){var t=this.option("readOnly");this._toggleBackspaceHandler(t),this.$element().toggleClass(Qi,!!t),this.setAria("readonly",t||void 0)},_toggleBackspaceHandler:function(t){var e=this._keyboardEventBindingTarget(),i=f("keydown",nn);h.off(e,i),t&&h.on(e,i,n=>{F(n)==="backspace"&&n.preventDefault()})},_dispose:function(){var t=this.$element()[0];G(t,Xt,null),clearTimeout(this.showValidationMessageTimeout),this._disposeValidationMessage(),this.callBase()},_setSubmitElementName:function(t){var e=this._getSubmitElement();e&&(t.length>0?e.attr("name",t):e.removeAttr("name"))},_getSubmitElement:function(){return null},_setValidationMessageOption:function(t){var e,{name:i,value:n}=t,a=qt[i]?qt[i]:i;(e=this._validationMessage)===null||e===void 0||e.option(a,n)},_hasActiveElement:_,_optionChanged:function(t){var e;switch(t.name){case"onValueChanged":this._createValueChangeAction();break;case"readOnly":this._toggleReadOnlyState(),this._refreshFocusState();break;case"value":t.value!=t.previousValue&&this.validationRequest.fire({value:t.value,editor:this}),this._valueChangeActionSuppressed||(this._raiseValueChangeAction(t.value,t.previousValue),this._saveValueChangeEvent(void 0));break;case"width":this.callBase(t),(e=this._validationMessage)===null||e===void 0||e.updateMaxWidth();break;case"name":this._setSubmitElementName(t.value);break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(Dt.synchronizeValidationOptions(t,this.option())),this._renderValidationState();break;case"validationBoundary":case"validationMessageMode":case"validationMessagePosition":case"validationMessageOffset":this._setValidationMessageOption(t);break;case"rtlEnabled":this._setValidationMessageOption(t),this.callBase(t);break;case"validationTooltipOptions":this._innerWidgetOptionChanged(this._validationMessage,t);break;default:this.callBase(t)}},blur:function(){this._hasActiveElement()&&si()},reset:function(){var t=this._getDefaultOptions();this.option("value",t.value)}});yt.isEditor=t=>t instanceof yt;const sn=yt;var Z=5;class on{constructor(e){this.init(e)}init(e){var{dragEnabled:i,handle:n,draggableElement:a,positionController:s}=e;this._positionController=s,this._draggableElement=a,this._handle=n,this._dragEnabled=i,this.unsubscribe(),i&&this.subscribe()}moveDown(e){this._moveTo(Z,0,e)}moveUp(e){this._moveTo(-Z,0,e)}moveLeft(e){this._moveTo(0,-Z,e)}moveRight(e){this._moveTo(0,Z,e)}subscribe(){var e=this._getEventNames();h.on(this._handle,e.startEventName,i=>{this._dragStartHandler(i)}),h.on(this._handle,e.updateEventName,i=>{this._dragUpdateHandler(i)}),h.on(this._handle,e.endEventName,i=>{this._dragEndHandler(i)})}unsubscribe(){var e=this._getEventNames();h.off(this._handle,e.startEventName),h.off(this._handle,e.updateEventName),h.off(this._handle,e.endEventName)}_getEventNames(){var e=f(Be,"overlayDrag"),i=f(we,"overlayDrag"),n=f(De,"overlayDrag");return{startEventName:e,updateEventName:i,endEventName:n}}_dragStartHandler(e){var i=this._getAllowedOffsets();this._prevOffset={x:0,y:0},e.targetElements=[],e.maxTopOffset=i.top,e.maxBottomOffset=i.bottom,e.maxLeftOffset=i.left,e.maxRightOffset=i.right}_dragUpdateHandler(e){var i={top:e.offset.y-this._prevOffset.y,left:e.offset.x-this._prevOffset.x};this._moveByOffset(i),this._prevOffset=e.offset}_dragEndHandler(e){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(e)}_moveTo(e,i,n){if(this._dragEnabled){n.preventDefault(),n.stopPropagation();var a=this._fitOffsetIntoAllowedRange(e,i);this._moveByOffset(a),this._dragEndHandler(n)}}_fitOffsetIntoAllowedRange(e,i){var n=this._getAllowedOffsets();return{top:w(e,-n.top,n.bottom),left:w(i,-n.left,n.right)}}_getContainerDimensions(){var e=W.getDocument(),i=this._positionController.$dragResizeContainer.get(0),n=A(i),a=I(i);return L(i)&&(a=Math.max(e.body.clientHeight,a),n=Math.max(e.body.clientWidth,n)),{width:n,height:a}}_getContainerPosition(){var e=this._positionController.$dragResizeContainer.get(0);return L(e)?{top:0,left:0}:kt(e)}_getElementPosition(){return kt(this._draggableElement)}_getInnerDelta(){var e=this._getContainerDimensions(),i=this._getElementDimensions();return{x:e.width-i.width,y:e.height-i.height}}_getOuterDelta(){var{width:e,height:i}=this._getElementDimensions(),n=this._positionController.outsideDragFactor;return{x:e*n,y:i*n}}_getFullDelta(){var e=this._getInnerDelta(),i=this._getOuterDelta();return{x:e.x+i.x,y:e.y+i.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){var e=this._getFullDelta(),i=e.y>=0&&e.x>=0;if(!i)return{top:0,bottom:0,left:0,right:0};var n=this._getElementPosition(),a=this._getContainerPosition(),s=this._getOuterDelta();return{top:n.top-a.top+s.y,bottom:-n.top+a.top+e.y,left:n.left-a.left+s.x,right:-n.left+a.left+e.x}}_moveByOffset(e){var i=Tt(this._draggableElement),n={left:i.left+e.left,top:i.top+e.top};j(this._draggableElement,n)}}const rn=on;var ct="dxResizable",ln="dx-resizable",hn="dx-resizable-resizing",Q="dx-resizable-handle",un="dx-resizable-handle-top",dn="dx-resizable-handle-bottom",cn="dx-resizable-handle-left",pn="dx-resizable-handle-right",J="dx-resizable-handle-corner",_n=f(Be,ct),fn=f(we,ct),vn=f(De,ct),mn={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},Le=oi.inherit({_getDefaultOptions:function(){return d(this.callBase(),{handles:"all",step:"1",stepPrecision:"simple",area:void 0,minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,onResizeStart:null,onResize:null,onResizeEnd:null,roundStepValue:!0,keepAspectRatio:!0})},_init:function(){this.callBase(),this.$element().addClass(ln)},_initMarkup:function(){this.callBase(),this._renderHandles()},_render:function(){this.callBase(),this._renderActions()},_renderActions:function(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")},_renderHandles:function(){this._handles=[];var t=this.option("handles");if(!(t==="none"||!t)){var e=t==="all"?["top","bottom","left","right"]:t.split(" "),i={};S(e,(n,a)=>{i[a]=!0,this._renderHandle(a)}),i.bottom&&i.right&&this._renderHandle("corner-bottom-right"),i.bottom&&i.left&&this._renderHandle("corner-bottom-left"),i.top&&i.right&&this._renderHandle("corner-top-right"),i.top&&i.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()}},_renderHandle:function(t){var e=l("<div>").addClass(Q).addClass(Q+"-"+t).appendTo(this.$element());this._handles.push(e)},_attachEventHandlers:function(){if(!this.option("disabled")){var t={};t[_n]=this._dragStartHandler.bind(this),t[fn]=this._dragHandler.bind(this),t[vn]=this._dragEndHandler.bind(this),this._handles.forEach(e=>{h.on(e,t,{direction:"both",immediate:!0})})}},_detachEventHandlers:function(){this._handles.forEach(t=>{h.off(t)})},_toggleEventHandlers:function(t){t?this._attachEventHandlers():this._detachEventHandlers()},_getElementSize:function(){var t=this.$element();return t.css("boxSizing")==="border-box"?{width:A(t),height:I(t)}:{width:z(t),height:ke(t)}},_dragStartHandler:function(t){var e=this.$element();if(e.is(".dx-state-disabled, .dx-state-disabled *")){t.cancel=!0;return}this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(t),this._elementLocation=Tt(e),this._elementSize=this._getElementSize(),this._renderDragOffsets(t),this._resizeStartAction({event:t,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),t.targetElements=null},_toggleResizingClass:function(t){this.$element().toggleClass(hn,t)},_renderDragOffsets:function(t){var e=this._getArea();if(e){var i=l(t.target).closest("."+Q),n=A(i),a=I(i),s=i.offset(),r=e.offset,u=this._getAreaScrollOffset();t.maxLeftOffset=this._leftMaxOffset=s.left-r.left-u.scrollX,t.maxRightOffset=this._rightMaxOffset=r.left+e.width-s.left-n+u.scrollX,t.maxTopOffset=this._topMaxOffset=s.top-r.top-u.scrollY,t.maxBottomOffset=this._bottomMaxOffset=r.top+e.height-s.top-a+u.scrollY}},_getBorderWidth:function(t,e){if(L(t.get(0)))return 0;var i=t.css(mn[e]);return parseInt(i)||0},_proportionate:function(t,e){var i=this._elementSize,n=t==="x"?i.width/i.height:i.height/i.width;return e*n},_getProportionalDelta:function(t){var{x:e,y:i}=t,n=this._proportionate("y",e);if(n>=i)return{x:e,y:n};var a=this._proportionate("x",i);return a>=e?{x:a,y:i}:{x:0,y:0}},_getDirectionName:function(t){var e=this._movingSides;return t==="x"?e.left?"left":"right":e.top?"top":"bottom"},_fitIntoArea:function(t,e){var i,n=this._getDirectionName(t);return Math.min(e,(i=this["_".concat(n,"MaxOffset")])!==null&&i!==void 0?i:1/0)},_fitDeltaProportionally:function(t){var e=St({},t),i=this._elementSize,{minWidth:n,minHeight:a,maxWidth:s,maxHeight:r}=this.option(),u=()=>i.width+e.x,c=()=>i.height+e.y,v=M=>e[M]===this._fitIntoArea(M,e[M]),b=()=>Mt(u(),n,s)&&v("x"),y=()=>Mt(c(),a,r)&&v("y");if(!b()){var T=this._fitIntoArea("x",w(u(),n,s)-i.width);e={x:T,y:this._proportionate("y",T)}}if(!y()){var x=this._fitIntoArea("y",w(c(),a,r)-i.height);e={x:this._proportionate("x",x),y:x}}return b()&&y()?e:{x:0,y:0}},_fitDelta:function(t){var{x:e,y:i}=t,n=this._elementSize,{minWidth:a,minHeight:s,maxWidth:r,maxHeight:u}=this.option();return{x:w(n.width+e,a,r)-n.width,y:w(n.height+i,s,u)-n.height}},_getDeltaByOffset:function(t){var e=this._movingSides,i=this._isCornerHandler(e)&&this.option("keepAspectRatio"),n={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)};if(i){var a=this._getProportionalDelta(n),s=this._fitDeltaProportionally(a);n=s}else{var r=this._fitDelta(n),u=this._roundByStep(r);n=u}return n},_updatePosition:function(t,e){var{width:i,height:n}=e,a=this._elementLocation,s=this._movingSides,r=this.$element(),u=this._getElementSize(),c=t.y*(s.top?-1:1)-((u.height||n)-n),v=t.x*(s.left?-1:1)-((u.width||i)-i);j(r,{top:a.top+(s.top?c:0),left:a.left+(s.left?v:0)})},_dragHandler:function(t){var e=this._getOffset(t),i=this._getDeltaByOffset(e),n=this._updateDimensions(i);this._updatePosition(i,n),this._triggerResizeAction(t,n)},_updateDimensions:function(t){var e=v=>v.substring(v.length-2)==="px",i=this.option("stepPrecision")==="strict",n=this._elementSize,a=n.width+t.x,s=n.height+t.y,r=this.$element().get(0).style,u=t.x||i||e(r.width),c=t.y||i||e(r.height);return u&&this.option({width:a}),c&&this.option({height:s}),{width:u?a:n.width,height:c?s:n.height}},_triggerResizeAction:function(t,e){var{width:i,height:n}=e;this._resizeAction({event:t,width:this.option("width")||i,height:this.option("height")||n,handles:this._movingSides}),$(this.$element())},_isCornerHandler:t=>Object.values(t).reduce((e,i)=>e^i,0)===0,_getOffset:function(t){var e=t.offset,i=this._movingSides;return!i.left&&!i.right&&(e.x=0),!i.top&&!i.bottom&&(e.y=0),e},_roundByStep:function(t){return this.option("stepPrecision")==="strict"?this._roundStrict(t):this._roundNotStrict(t)},_getSteps:function(){return ri(this.option("step"),!this.option("roundStepValue"))},_roundNotStrict:function(t){var e=this._getSteps();return{x:t.x-t.x%e.h,y:t.y-t.y%e.v}},_roundStrict:function(t){var e=this._movingSides,i={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)},n=this._getSteps(),a=this._elementLocation,s=this._elementSize,r=e.left?a.left:a.left+s.width,u=e.top?a.top:a.top+s.height,c=(r+i.x)%n.h,v=(u+i.y)%n.v,b=Math.sign||(O=>(O=+O,O===0||isNaN(O)?O:O>0?1:-1)),y=(O,pt)=>(1+.2*b(pt))%1*O,T=(O,pt)=>Math.abs(O)<.2*pt,x=i.x-c,M=i.y-v;c>y(n.h,i.x)&&(x+=n.h),v>y(n.v,i.y)&&(M+=n.v);var Qe=(e.left||e.right)&&!T(i.x,n.h)?x:0,Je=(e.top||e.bottom)&&!T(i.y,n.v)?M:0;return{x:Qe*(e.left?-1:1),y:Je*(e.top?-1:1)}},_getMovingSides:function(t){var e=l(t.target),i=e.hasClass(J+"-top-left"),n=e.hasClass(J+"-top-right"),a=e.hasClass(J+"-bottom-left"),s=e.hasClass(J+"-bottom-right");return{top:e.hasClass(un)||i||n,left:e.hasClass(cn)||i||a,bottom:e.hasClass(dn)||a||s,right:e.hasClass(pn)||n||s}},_getArea:function(){var t=this.option("area");return at(t)&&(t=t.call(this)),Vt(t)?this._getAreaFromObject(t):this._getAreaFromElement(t)},_getAreaScrollOffset:function(){var t=this.option("area"),e=!at(t)&&!Vt(t),i={scrollY:0,scrollX:0};if(e){var n=l(t)[0];L(n)&&(i.scrollX=n.pageXOffset,i.scrollY=n.pageYOffset)}return i},_getAreaFromObject:function(t){var e={width:t.right-t.left,height:t.bottom-t.top,offset:{left:t.left,top:t.top}};return this._correctAreaGeometry(e),e},_getAreaFromElement:function(t){var e=l(t),i;return e.length&&(i={width:Rt(e),height:Pt(e),offset:d({top:0,left:0},L(e[0])?{}:e.offset())},this._correctAreaGeometry(i,e)),i},_correctAreaGeometry:function(t,e){var i=e?this._getBorderWidth(e,"left"):0,n=e?this._getBorderWidth(e,"top"):0;t.offset.left+=i+this._getBorderWidth(this.$element(),"left"),t.offset.top+=n+this._getBorderWidth(this.$element(),"top"),t.width-=A(this.$element())-Rt(this.$element()),t.height-=I(this.$element())-Pt(this.$element())},_dragEndHandler:function(t){var e=this.$element();this._resizeEndAction({event:t,width:A(e),height:I(e),handles:this._movingSides}),this._toggleResizingClass(!1)},_renderWidth:function(t){this.option("width",w(t,this.option("minWidth"),this.option("maxWidth")))},_renderHeight:function(t){this.option("height",w(t,this.option("minHeight"),this.option("maxHeight")))},_optionChanged:function(t){switch(t.name){case"disabled":this._toggleEventHandlers(!t.value),this.callBase(t);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":k()&&this._renderWidth(A(this.$element()));break;case"minHeight":case"maxHeight":k()&&this._renderHeight(I(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:this.callBase(t)}},_clean:function(){this.$element().find("."+Q).remove()},_useTemplates:function(){return!1}});V(ct,Le);const gn=Le;var Zt=K(),Cn={observe:_,unobserve:_,disconnect:_};class En{constructor(){if(!k()||!Zt.ResizeObserver)return Cn;this._callbacksMap=new Map,this._observer=new Zt.ResizeObserver(e=>{e.forEach(i=>{var n;(n=this._callbacksMap.get(i.target))===null||n===void 0||n(i)})})}observe(e,i){this._callbacksMap.set(e,i),this._observer.observe(e)}unobserve(e){this._callbacksMap.delete(e),this._observer.unobserve(e)}disconnect(){this._callbacksMap.clear(),this._observer.disconnect()}}var bn=new En;const lt=bn;var yn=["fullScreen","forceApplyBindings","dragOutsideBoundary","dragAndResizeArea","outsideDragFactor"],mt=K();class Sn extends li{constructor(e){var{fullScreen:i,forceApplyBindings:n,dragOutsideBoundary:a,dragAndResizeArea:s,outsideDragFactor:r}=e,u=hi(e,yn);super(u),this._props=St({},this._props,{fullScreen:i,forceApplyBindings:n,dragOutsideBoundary:a,dragAndResizeArea:s,outsideDragFactor:r}),this._$dragResizeContainer=void 0,this._outsideDragFactor=void 0,this._lastPositionBeforeFullScreen=void 0,this._updateDragResizeContainer(),this._updateOutsideDragFactor()}set fullScreen(e){this._props.fullScreen=e,e?this._fullScreenEnabled():this._fullScreenDisabled()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._outsideDragFactor}set dragAndResizeArea(e){this._props.dragAndResizeArea=e,this._updateDragResizeContainer()}set dragOutsideBoundary(e){this._props.dragOutsideBoundary=e,this._updateDragResizeContainer(),this._updateOutsideDragFactor()}set outsideDragFactor(e){this._props.outsideDragFactor=e,this._updateOutsideDragFactor()}updateContainer(e){super.updateContainer(e),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){if(this._props.fullScreen)j(this._$content,{top:0,left:0}),this.detectVisualPositionChange();else{var e,i;(e=(i=this._props).forceApplyBindings)===null||e===void 0||e.call(i),!this._shouldRenderContentInitialPosition&&this._lastPositionBeforeFullScreen?(j(this._$content,this._lastPositionBeforeFullScreen),this._lastPositionBeforeFullScreen=void 0,this.detectVisualPositionChange()):super.positionContent()}}_updateOutsideDragFactor(){this._outsideDragFactor=this._getOutsideDragFactor()}_getOutsideDragFactor(){return this._props.dragOutsideBoundary?1:this._props.outsideDragFactor}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){if(this._props.dragOutsideBoundary)return l(mt);if(this._props.dragAndResizeArea)return l(this._props.dragAndResizeArea);var e=ui().get(0)||this._props.container;return e?this._$markupContainer:l(mt)}_getVisualContainer(){return this._props.fullScreen?l(mt):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1),this._lastPositionBeforeFullScreen=this._visualPosition}_fullScreenDisabled(){this.restorePositionOnNextRender(!1)}}var Tn=K(),gt="dx-popup",Qt="dx-popup-wrapper",On="dx-popup-fullscreen",An="dx-popup-fullscreen-width",xn="dx-popup-normal",In="dx-popup-content",Bn="dx-state-disabled",wn="dx-popup-draggable",Jt="dx-popup-title",Dn="dx-closebutton",te="dx-popup-bottom",kn="dx-has-close-button",Vn="dx-template-wrapper",Rn="dx-popup-flex-height",Pn="dx-popup-inherit-height",ee=["cancel","clear","done"],Mn="default",$n="normal",Hn="text",Ln="contained",Nn=st.safari&&di(st.version,[11])<0,B={static:"",inherit:Pn,flex:Rn},Fn=t=>{var e=E.current(),i=e.platform,n="bottom",a="before";if(i==="ios")switch(t){case"cancel":n="top";break;case"clear":n="top",a="after";break;case"done":a="after"}else if(i==="android")switch(t){case"cancel":case"done":a="after"}return{toolbar:n,location:a}},Ne=Ae.inherit({_supportedKeys:function(){return d(this.callBase(),{upArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveUp(t)},downArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveDown(t)},leftArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveLeft(t)},rightArrow:t=>{var e;(e=this._drag)===null||e===void 0||e.moveRight(t)}})},_getDefaultOptions:function(){return d(this.callBase(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,dragAndResizeArea:void 0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})},_defaultOptionsRules:function(){var t=Ve();return this.callBase().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:function(e){return E.real().deviceType==="desktop"&&e.platform==="generic"},options:{dragEnabled:!0}},{device:function(){return E.real().deviceType==="desktop"&&!E.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return Re(t)},options:{useDefaultToolbarButtons:!0,useFlatToolbarButtons:!0,showCloseButton:!1}}])},_iosAnimation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}},_androidAnimation:function(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}},_init:function(){var t=this.option("_wrapperClassExternal"),e=t?"".concat(Qt," ").concat(t):Qt;this.callBase(),this._updateResizeCallbackSkipCondition(),this.$element().addClass(gt),this.$wrapper().addClass(e),this._$popupContent=this._$content.wrapInner(l("<div>").addClass(In)).children().eq(0)},_render:function(){var t=this.option("fullScreen");this._toggleFullScreenClass(t),this.callBase()},_toggleFullScreenClass:function(t){this.$overlayContent().toggleClass(On,t).toggleClass(xn,!t)},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({title:new _t,bottom:new _t})},_getActionsList:function(){return this.callBase().concat(["onResizeStart","onResize","onResizeEnd"])},_contentResizeHandler:function(t){this._shouldSkipContentResize(t)||this._renderGeometry({shouldOnlyReposition:!0})},_doesShowAnimationChangeDimensions:function(){var t=this.option("animation");return["to","from"].some(e=>{var i,n=t==null||(i=t.show)===null||i===void 0?void 0:i[e];return Ot(n)&&("width"in n||"height"in n)})},_updateResizeCallbackSkipCondition(){var t=this._doesShowAnimationChangeDimensions();this._shouldSkipContentResize=e=>t&&this._showAnimationProcessing||this._areContentDimensionsRendered(e)},_observeContentResize:function(t){if(this.option("useResizeObserver")){var e=this._$content.get(0);t?lt.observe(e,i=>{this._contentResizeHandler(i)}):lt.unobserve(e)}},_areContentDimensionsRendered:function(t){var e,i,n,a=(e=t.contentBoxSize)===null||e===void 0?void 0:e[0];if(a){var s,r;return parseInt(a.inlineSize,10)===((s=this._renderedDimensions)===null||s===void 0?void 0:s.width)&&parseInt(a.blockSize,10)===((r=this._renderedDimensions)===null||r===void 0?void 0:r.height)}var u=t.contentRect;return parseInt(u.width,10)===((i=this._renderedDimensions)===null||i===void 0?void 0:i.width)&&parseInt(u.height,10)===((n=this._renderedDimensions)===null||n===void 0?void 0:n.height)},_renderContentImpl:function(){this._renderTitle(),this.callBase(),this._renderResize(),this._renderBottom()},_renderTitle:function(){var t=this._getToolbarItems("top"),e=this.option("title"),i=this.option("showTitle");if(i&&e&&t.unshift({location:E.current().ios?"center":"before",text:e}),i||t.length>0){this._$title&&this._$title.remove();var n=l("<div>").addClass(Jt).insertBefore(this.$content());this._$title=this._renderTemplateByType("titleTemplate",t,n).addClass(Jt),this._renderDrag(),this._executeTitleRenderAction(this._$title),this._$title.toggleClass(kn,this._hasCloseButton())}else this._$title&&this._$title.detach()},_renderTemplateByType:function(t,e,i,n){var{rtlEnabled:a,useDefaultToolbarButtons:s,useFlatToolbarButtons:r,disabled:u}=this.option(),c=this._getTemplateByOption(t),v=c instanceof _t;if(v){var b=d({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),y=d(n,{items:e,rtlEnabled:a,useDefaultButtons:s,useFlatButtons:r,disabled:u,integrationOptions:b});this._getTemplate("dx-polymorph-widget").render({container:i,model:{widget:this._getToolbarName(),options:y}});var T=i.children("div");return i.replaceWith(T),T}else{var x=l(c.render({container:N(i)}));return x.hasClass(Vn)&&(i.replaceWith(x),i=x),i}},_getToolbarName:function(){return"dxToolbarBase"},_renderVisibilityAnimate:function(t){return this._observeContentResize(t),this.callBase(t)},_executeTitleRenderAction:function(t){this._getTitleRenderAction()({titleElement:N(t)})},_getTitleRenderAction:function(){return this._titleRenderAction||this._createTitleRenderAction()},_createTitleRenderAction:function(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]})},_getCloseButton:function(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}},_getCloseButtonRenderer:function(){return(t,e,i)=>{var n=l("<div>").addClass(Dn);this._createComponent(n,ot,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),l(i).append(n)}},_getToolbarItems:function(t){var e=this.option("toolbarItems"),i=[];this._toolbarItemClasses=[];var n=E.current().platform,a=0;return S(e,(s,r)=>{var u=m(r.shortcut),c=u?Fn(r.shortcut):r;if(u&&n==="ios"&&a<2&&(c.toolbar="top",a++),c.toolbar=r.toolbar||c.toolbar||"top",c&&c.toolbar===t){u&&d(c,{location:r.location},this._getToolbarItemByAlias(r));var v=n==="generic";r.shortcut==="done"&&v||r.shortcut==="cancel"&&!v?i.unshift(c):i.push(c)}}),t==="top"&&this._hasCloseButton()&&i.push(this._getCloseButton()),i},_hasCloseButton(){return this.option("showCloseButton")&&this.option("showTitle")},_getLocalizationKey:t=>t.toLowerCase()==="done"?"OK":ci(t,!0),_getToolbarItemByAlias:function(t){var e=this,i=t.shortcut;if(!ee.includes(i))return!1;var n=d({text:P.format(this._getLocalizationKey(i)),onClick:this._createToolbarItemAction(t.onClick),integrationOptions:{},type:e.option("useDefaultToolbarButtons")?Mn:$n,stylingMode:e.option("useFlatToolbarButtons")?Hn:Ln},t.options||{}),a=gt+"-"+i;return this._toolbarItemClasses.push(a),{template:function(s,r,u){var c=l("<div>").addClass(a).appendTo(u);e._createComponent(c,ot,n)}}},_createToolbarItemAction:function(t){return this._createAction(t,{afterExecute:function(e){e.component.hide()}})},_renderBottom:function(){var t=this._getToolbarItems("bottom");if(t.length){this._$bottom&&this._$bottom.remove();var e=l("<div>").addClass(te).insertAfter(this.$content());this._$bottom=this._renderTemplateByType("bottomTemplate",t,e,{compactMode:!0}).addClass(te),this._toggleClasses()}else this._$bottom&&this._$bottom.detach()},_toggleDisabledState:function(t){this.callBase(...arguments),this.$content().toggleClass(Bn,Boolean(t))},_toggleClasses:function(){var t=ee;S(t,(e,i)=>{var n=gt+"-"+i;this._toolbarItemClasses.includes(n)?(this.$wrapper().addClass(n+"-visible"),this._$bottom.addClass(n)):(this.$wrapper().removeClass(n+"-visible"),this._$bottom.removeClass(n))})},_toggleFocusClass(t,e){if(this.callBase(t,e),t&&!pi(this._zIndex)){var i=_i(this._zIndexInitValue());fi(this._zIndex),this._zIndex=i,this._$wrapper.css("zIndex",i),this._$content.css("zIndex",i)}},_getPositionControllerConfig(){var{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:i,dragAndResizeArea:n,outsideDragFactor:a}=this.option();return d({},this.callBase(),{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:i,dragAndResizeArea:n,outsideDragFactor:a})},_initPositionController(){this._positionController=new Sn(this._getPositionControllerConfig())},_getDragTarget:function(){return this.topToolbar()},_renderGeometry:function(t){var{visible:e,useResizeObserver:i}=this.option();if(e&&k()){var n=this._showAnimationProcessing,a=n&&!(t!=null&&t.forceStopAnimation)&&i;this._isAnimationPaused=a||void 0,this._stopAnimation(),t!=null&&t.shouldOnlyReposition?this._renderPosition(!1):this._renderGeometryImpl(t==null?void 0:t.isDimensionChange),a&&(this._animateShowing(),this._isAnimationPaused=void 0)}},_cacheDimensions:function(){this.option("useResizeObserver")&&(this._renderedDimensions={width:parseInt(z(this._$content),10),height:parseInt(ke(this._$content),10)})},_renderGeometryImpl:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;t||this._resetContentHeight(),this.callBase(),this._cacheDimensions(),this._setContentHeight()},_resetContentHeight:function(){var t=this._getOptionValue("height");t==="auto"&&this.$content().css({height:"auto",maxHeight:"none"})},_renderDrag:function(){var t=this._getDragTarget(),e=this.option("dragEnabled");if(t){var i={dragEnabled:e,handle:t.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(i):this._drag=new rn(i),this.$overlayContent().toggleClass(wn,e)}},_renderResize:function(){this._resizable=this._createComponent(this._$content,gn,{handles:this.option("resizeEnabled")?"all":"none",onResizeEnd:t=>{this._resizeEndHandler(t),this._observeContentResize(!0)},onResize:t=>{this._setContentHeight(),this._actions.onResize(t)},onResizeStart:t=>{this._observeContentResize(!1),this._actions.onResizeStart(t)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})},_resizeEndHandler:function(t){var e=this._resizable.option("width"),i=this._resizable.option("height");e&&this._setOptionWithoutOptionChange("width",e),i&&this._setOptionWithoutOptionChange("height",i),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(t.event),this._actions.onResizeEnd(t)},_setContentHeight:function(){(this.option("forceApplyBindings")||_)();var t=this.$overlayContent().get(0),e=this._chooseHeightStrategy(t);this.$content().css(this._getHeightCssStyles(e,t)),this._setHeightClasses(this.$overlayContent(),e)},_heightStrategyChangeOffset:function(t,e){return t===B.flex?-e:0},_chooseHeightStrategy:function(t){var e=t.style.width==="auto"||t.style.width==="",i=B.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(e||Nn?i=B.inherit:i=B.flex),i},_getHeightCssStyles:function(t,e){var i={},n=this._getOptionValue("maxHeight",e),a=this._getOptionValue("minHeight",e),s=this._splitPopupHeight(),r=s.header+s.footer+s.contentVerticalOffsets+s.popupVerticalOffsets+this._heightStrategyChangeOffset(t,s.popupVerticalPaddings);if(t===B.static){if(!this._isAutoHeight()||n||a){var u=this.option("fullScreen")?Math.min($t(e).height,K().innerHeight):$t(e).height,c=u-r;i={height:Math.max(0,c),minHeight:"auto",maxHeight:"auto"}}}else{var v=l(this._positionController.$visualContainer).get(0),b=vi(n,-r,v),y=mi(a,-r,v);i={height:"auto",minHeight:y,maxHeight:b}}return i},_setHeightClasses:function(t,e){var i="";for(var n in B)B[n]!==e&&(i+=" "+B[n]);t.removeClass(i).addClass(e)},_isAutoHeight:function(){return this.$overlayContent().get(0).style.height==="auto"},_splitPopupHeight:function(){var t=this.topToolbar(),e=this.bottomToolbar();return{header:Ht(t&&t.get(0)),footer:Ht(e&&e.get(0)),contentVerticalOffsets:ft(this.$overlayContent().get(0),!0),popupVerticalOffsets:ft(this.$content().get(0),!0),popupVerticalPaddings:ft(this.$content().get(0),!1)}},_isAllWindowCovered:function(){return this.callBase()||this.option("fullScreen")},_renderDimensions:function(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):this.callBase(),k()&&this._renderFullscreenWidthClass()},_dimensionChanged:function(){this._renderGeometry({isDimensionChange:!0})},_clean:function(){this.callBase(),this._observeContentResize(!1)},_renderFullscreenWidthClass:function(){this.$overlayContent().toggleClass(An,A(this.$overlayContent())===z(Tn))},refreshPosition:function(){this._renderPosition()},_optionChanged:function(t){var e,i=t.value;switch(t.name){case"disabled":this.callBase(t),this._renderTitle(),this._renderBottom();break;case"animation":this._updateResizeCallbackSkipCondition();break;case"showTitle":case"title":case"titleTemplate":this._renderTitle(),this._renderGeometry(),$(this.$overlayContent());break;case"bottomTemplate":this._renderBottom(),this._renderGeometry(),$(this.$overlayContent());break;case"container":if(this.callBase(t),this.option("resizeEnabled")){var n;(n=this._resizable)===null||n===void 0||n.option("area",this._positionController.$dragResizeContainer)}break;case"width":case"height":this.callBase(t),(e=this._resizable)===null||e===void 0||e.option(t.name,t.value);break;case"onTitleRendered":this._createTitleRenderAction(t.value);break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":var a=!t.fullName.match(/^toolbarItems((\[\d+\])(\.(options|visible).*)?)?$/);this._renderTitle(),this._renderBottom(),a&&(this._renderGeometry(),$(this.$overlayContent()));break;case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=i;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),$(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=t.value,this._toggleFullScreenClass(t.value),this._toggleSafariScrolling(),this._renderGeometry(),$(this.$overlayContent());break;case"showCloseButton":this._renderTitle();break;default:this.callBase(t)}},bottomToolbar:function(){return this._$bottom},topToolbar:function(){return this._$title},$content:function(){return this._$popupContent},content:function(){return N(this.$content())},$overlayContent:function(){return this._$content}});V("dxPopup",Ne);const zn=Ne;var{ios:Wn,mac:Kn}=E.real(),Gn=Wn||Kn,Un=function(t){var e;try{e={start:t.selectionStart,end:t.selectionEnd}}catch{e={start:0,end:0}}return e},jn=function(t,e){var i=W.getBody();if(!(!i.contains(t)&&!i.contains(t.getRootNode().host)))try{t.selectionStart=e.start,t.selectionEnd=e.end}catch{}},Xn=function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t=l(t).get(0),!m(e))return Un(t);!i&&Gn&&W.getActiveElement(t)!==t||jn(t,e)};const Fe=Xn;function Yn(){var{android:t,version:e}=E.real();return t&&e[0]>4}function qn(){return"onbeforeinput"in W.createElement("input")&&!st.chrome||Yn()}var H=" ",ze=Te.inherit({ctor:function(t){this._value=H,d(this,t)},next:function(t){if(!arguments.length)return this._next;this._next=t},text:_,value:_,rawValue:_,handle:_,_prepareHandlingArgs:function(t,e){var i,n,a;e=e||{};var s=Object.prototype.hasOwnProperty.call(t,"value")?"value":"text";return t[s]=(i=e.str)!==null&&i!==void 0?i:t[s],t.start=(n=e.start)!==null&&n!==void 0?n:t.start,t.length=(a=e.length)!==null&&a!==void 0?a:t.length,t.index=t.index+1,t},reset:_,clear:_,first:function(t){return t=t||0,this.next().first(t+1)},isAccepted:function(){return!1},adjustedCaret:function(t,e,i){return e?this._adjustedForward(t,0,i):this._adjustedBackward(t,0,i)},_adjustedForward:_,_adjustedBackward:_,isValid:_}),Zn=ze.inherit({next:_,handle:function(){return 0},text:function(){return""},value:function(){return""},first:function(){return 0},rawValue:function(){return""},adjustedCaret:function(){return 0},isValid:function(){return!0}}),We=ze.inherit({text:function(){return(this._value!==H?this._value:this.maskChar)+this.next().text()},value:function(){return this._value+this.next().value()},rawValue:function(){return this._value+this.next().rawValue()},handle:function(t){var e=Object.prototype.hasOwnProperty.call(t,"value")?t.value:t.text;if(!e||!e.length||!t.length)return 0;if(t.start)return this.next().handle(this._prepareHandlingArgs(t,{start:t.start-1}));var i=e[0],n=e.substring(1);return this._tryAcceptChar(i,t),this._accepted()?this.next().handle(this._prepareHandlingArgs(t,{str:n,length:t.length-1}))+1:this.handle(this._prepareHandlingArgs(t,{str:n,length:t.length-1}))},clear:function(t){this._tryAcceptChar(H,t),this.next().clear(this._prepareHandlingArgs(t))},reset:function(){this._accepted(!1),this.next().reset()},_tryAcceptChar:function(t,e){if(this._accepted(!1),!!this._isAllowed(t,e)){var i=t===H?this.maskChar:t;e.fullText=e.fullText.substring(0,e.index)+i+e.fullText.substring(e.index+1),this._accepted(!0),this._value=t}},_accepted:function(t){if(!arguments.length)return!!this._isAccepted;this._isAccepted=!!t},first:function(t){return this._value===H?t||0:this.callBase(t)},_isAllowed:function(t,e){return t===H?!0:this._isValid(t,e)},_isValid:function(t,e){var i=this.allowedChars;return i instanceof RegExp?i.test(t):at(i)?i(t,e.index,e.fullText):Array.isArray(i)?i.includes(t):i===t},isAccepted:function(t){return t===0?this._accepted():this.next().isAccepted(t-1)},_adjustedForward:function(t,e,i){return e>=t?e:this.next()._adjustedForward(t,e+1,i)||e+1},_adjustedBackward:function(t,e){return e>=t-1?t:this.next()._adjustedBackward(t,e+1)||e+1},isValid:function(t){return this._isValid(this._value,t)&&this.next().isValid(this._prepareHandlingArgs(t))}}),ie=We.inherit({value:function(){return this.next().value()},handle:function(t){var e=Object.prototype.hasOwnProperty.call(t,"value"),i=e?t.value:t.text;if(!i.length||!t.length)return 0;if(t.start||e)return this.next().handle(this._prepareHandlingArgs(t,{start:t.start&&t.start-1}));var n=i[0],a=i.substring(1);this._tryAcceptChar(n);var s=this._isAllowed(n)?this._prepareHandlingArgs(t,{str:a,length:t.length-1}):t;return this.next().handle(s)+1},clear:function(t){this._accepted(!1),this.next().clear(this._prepareHandlingArgs(t))},_tryAcceptChar:function(t){this._accepted(this._isValid(t))},_isValid:function(t){return t===this.maskChar},first:function(t){return t=t||0,this.next().first(t+1)},_adjustedForward:function(t,e,i){return e>=t&&i===this.maskChar?e:t===e+1&&this._accepted()?t:this.next()._adjustedForward(t,e+1,i)},_adjustedBackward:function(t,e){return e>=t-1?0:this.next()._adjustedBackward(t,e+1)},isValid:function(t){return this.next().isValid(this._prepareHandlingArgs(t))}});class Bt{constructor(e,i,n){this.instance=null,this.$container=null,this.$placeMarker=null,this.editor=i,this.name=e,this.options=n||{}}_addPlaceMarker(e){this.$placeMarker=l("<div>").appendTo(e)}_addToContainer(e){var{$placeMarker:i,$container:n}=this;i?i.replaceWith(e):e.appendTo(n)}_attachEvents(){throw"Not implemented"}_create(){throw"Not implemented"}_isRendered(){return!!this.instance}_isVisible(){var{editor:e,options:i}=this;return i.visible||!e.option("readOnly")}_isDisabled(){throw"Not implemented"}_shouldRender(){return this._isVisible()&&!this._isRendered()}dispose(){var{instance:e,$placeMarker:i}=this;e&&(e.dispose?e.dispose():e.remove(),this.instance=null),i&&i.remove()}render(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.$container;if(this.$container=e,this._isVisible()){var{instance:i,$element:n}=this._create();this.instance=i,this._attachEvents(i,n)}else this._addPlaceMarker(e)}update(){return this._shouldRender()&&this.render(),!!this.instance}}var Qn=ht.down,Jn="dx-state-invisible",ta="dx-clear-button-area",ea="dx-icon-clear",ia="dx-icon",na="dx-show-clear-button";class aa extends Bt{_create(){var e=l("<span>").addClass(ta).append(l("<span>").addClass(ia).addClass(ea));return this._addToContainer(e),this.update(!0),{instance:e,$element:e}}_isVisible(){var{editor:e}=this;return e._isClearButtonVisible()}_attachEvents(e,i){var{editor:n}=this,a=n.NAME;h.on(i,f(Qn,a),s=>{s.preventDefault(),s.pointerType!=="mouse"&&n._clearValueHandler(s)}),h.on(i,f(At,a),s=>n._clearValueHandler(s))}_legacyRender(e,i){e.toggleClass(na,i)}update(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!e&&super.update();var{editor:i,instance:n}=this,a=i.$element(),s=this._isVisible();n&&n.toggleClass(Jn,!s),this._legacyRender(a,s)}}var ne="dx-custom-button-hovered";class sa extends Bt{_attachEvents(e,i){var{editor:n}=this;h.on(i,xt,()=>{n.$element().addClass(ne)}),h.on(i,It,()=>{n.$element().removeClass(ne)}),h.on(i,At,a=>{a.stopPropagation()})}_create(){var{editor:e}=this,i=l("<div>");this._addToContainer(i);var n=e._createComponent(i,ot,d({},this.options,{ignoreParentReadOnly:!0,disabled:this._isDisabled(),integrationOptions:this._prepareIntegrationOptions(e)}));return{$element:i,instance:n}}_prepareIntegrationOptions(e){return d({},e.option("integrationOptions"),{skipTemplates:["content"]})}update(){var e=super.update();return this.instance&&this.instance.option("disabled",this._isDisabled()),e}_isVisible(){var{editor:e}=this;return e.option("visible")}_isDisabled(){var e=this.options.disabled!==void 0;return e?this.instance?this.instance.option("disabled"):this.options.disabled:this.editor.option("readOnly")}}var oa="dx-texteditor-buttons-container";function ra(t){(()=>{if(!t||typeof t!="object"||Array.isArray(t))throw D.Error("E1053")})(),(()=>{if(!("name"in t))throw D.Error("E1054")})(),(()=>{var{name:e}=t;if(typeof e!="string")throw D.Error("E1055")})(),(()=>{var{location:e}=t;"location"in t&&e!=="after"&&e!=="before"&&(t.location="after")})()}function ae(t,e){if(t.indexOf(e)!==-1)throw D.Error("E1055",e);t.push(e)}function la(t,e){return!!e.find(i=>i.name===t)}class ha{constructor(e,i){this.buttons=[],this.defaultButtonsInfo=i,this.editor=e}_compileButtonInfo(e){var i=[];return e.map(n=>{var a=typeof n=="string";a||ra(n);var s=a||la(n.name,this.defaultButtonsInfo);if(s){var r=this.defaultButtonsInfo.find(c=>{var{name:v}=c;return v===n||v===n.name});if(!r)throw D.Error("E1056",this.editor.NAME,n);return ae(i,n),r}else{var{name:u}=n;return ae(i,u),d(n,{Ctor:sa})}})}_createButton(e){var{Ctor:i,options:n,name:a}=e,s=new i(a,this.editor,n);return this.buttons.push(s),s}_renderButtons(e,i,n){var a=null,s=e?this._compileButtonInfo(e):this.defaultButtonsInfo;return s.forEach(r=>{var{location:u="after"}=r;u===n&&this._createButton(r).render((()=>(a=a||l("<div>").addClass(oa),n==="before"?i.prepend(a):i.append(a),a))())}),a}clean(){this.buttons.forEach(e=>e.dispose()),this.buttons=[]}getButton(e){var i=this.buttons.find(n=>{var{name:a}=n;return a===e});return i&&i.instance}renderAfterButtons(e,i){return this._renderButtons(e,i,"after")}renderBeforeButtons(e,i){return this._renderButtons(e,i,"before")}updateButtons(e){this.buttons.forEach(i=>{(!e||e.indexOf(i.name)!==-1)&&i.update()})}}var se="dx-texteditor-label",oe="dx-texteditor-with-label",re="dx-texteditor-with-floating-label",le="dx-texteditor-with-before-buttons",ua="dx-label-before",da="dx-label",ca="dx-label-after";class pa{constructor(e){var{$editor:i,text:n,mode:a,mark:s,containsButtonsBefore:r,containerWidth:u,beforeWidth:c}=e;this._props={$editor:i,text:n,mode:a,mark:s,containsButtonsBefore:r,containerWidth:u,beforeWidth:c},this._id="".concat(se,"-").concat(new ut),this._render(),this._toggleMarkupVisibility()}_isVisible(){return!!this._props.text&&this._props.mode!=="hidden"}_render(){this._$before=l("<div>").addClass(ua),this._$labelSpan=l("<span>"),this._$label=l("<div>").addClass(da).append(this._$labelSpan),this._$after=l("<div>").addClass(ca),this._$root=l("<div>").addClass(se).attr("id",this._id).append(this._$before).append(this._$label).append(this._$after),this._updateMark(),this._updateText(),this._updateBeforeWidth(),this._updateMaxWidth()}_toggleMarkupVisibility(){var e=this._isVisible();this._updateEditorBeforeButtonsClass(e),this._updateEditorLabelClass(e),e?this._$root.appendTo(this._props.$editor):this._$root.detach()}_updateEditorLabelClass(e){if(this._props.$editor.removeClass(re).removeClass(oe),e){var i=this._props.mode==="floating"?re:oe;this._props.$editor.addClass(i)}}_updateEditorBeforeButtonsClass(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._isVisible();if(this._props.$editor.removeClass(le),e){var i=this._props.containsButtonsBefore?le:"";this._props.$editor.addClass(i)}}_updateMark(){this._$labelSpan.attr("data-mark",this._props.mark)}_updateText(){this._$labelSpan.text(this._props.text)}_updateBeforeWidth(){this._$before.css({width:this._props.beforeWidth})}_updateMaxWidth(){this._$label.css({maxWidth:this._props.containerWidth})}$element(){return this._$root}isVisible(){return this._isVisible()}getId(){if(this._isVisible())return this._id}updateMode(e){this._props.mode=e,this._toggleMarkupVisibility()}updateText(e){this._props.text=e,this._updateText(),this._toggleMarkupVisibility()}updateMark(e){this._props.mark=e,this._updateMark()}updateContainsButtonsBefore(e){this._props.containsButtonsBefore=e,this._updateEditorBeforeButtonsClass()}updateBeforeWidth(e){this._props.beforeWidth=e,this._updateBeforeWidth()}updateMaxWidth(e){this._props.containerWidth=e,this._updateMaxWidth()}}var _a="dx-texteditor",fa="dx-texteditor-input-container",Ke="dx-texteditor-input",va="."+Ke,ma="dx-texteditor-container",ga="dx-texteditor-buttons-container",he="dx-placeholder",Ca="dx-texteditor-empty",Ea="dx-state-invisible",ba="dx-pending-indicator",ue="dx-validation-pending",ya="dx-valid",tt=["KeyDown","KeyPress","KeyUp","Change","Cut","Copy","Paste","Input"],Sa=["tab","enter","shift","control","alt","escape","pageUp","pageDown","end","home","leftArrow","upArrow","rightArrow","downArrow"],Ta=pa;function de(t){if(m(t)&&!Array.isArray(t))throw D.Error("E1053")}var Oa=sn.inherit({ctor:function(t,e){e&&de(e.buttons),this._buttonCollection=new ha(this,this._getDefaultButtons()),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._labelContainerElement=null,this.callBase.apply(this,arguments)},_getDefaultOptions:function(){return d(this.callBase(),{buttons:void 0,value:"",spellcheck:!1,showClearButton:!1,valueChangeEvent:"change",placeholder:"",inputAttr:{},onFocusIn:null,onFocusOut:null,onKeyDown:null,onKeyUp:null,onChange:null,onInput:null,onCut:null,onCopy:null,onPaste:null,onEnterKey:null,mode:"text",hoverStateEnabled:!0,focusStateEnabled:!0,text:void 0,displayValueFormatter:function(t){return m(t)&&t!==!1?t:""},stylingMode:Lt().editorStylingMode||"outlined",showValidationMark:!0,label:"",labelMode:"static",labelMark:""})},_defaultOptionsRules:function(){var t=Ve();return this.callBase().concat([{device:function(){return Re(t)},options:{stylingMode:Lt().editorStylingMode||"filled",labelMode:"floating"}}])},_getDefaultButtons:function(){return[{name:"clear",Ctor:aa}]},_isClearButtonVisible:function(){return this.option("showClearButton")&&!this.option("readOnly")},_input:function(){return this.$element().find(va).first()},_isFocused:function(){return X(this._input())||this.callBase()},_inputWrapper:function(){return this.$element()},_buttonsContainer:function(){return this._inputWrapper().find("."+ga).eq(0)},_isControlKey:function(t){return Sa.indexOf(t)!==-1},_renderStylingMode:function(){this.callBase(),this._updateButtonsStyling(this.option("stylingMode"))},_initMarkup:function(){this.$element().addClass(_a),this._renderInput(),this._renderStylingMode(),this._renderInputType(),this._renderPlaceholder(),this._renderProps(),this.callBase(),this._renderValue(),this._renderLabel()},_render:function(){this.callBase(),this._refreshValueChangeEvent(),this._renderEvents(),this._renderEnterKeyAction(),this._renderEmptinessEvent()},_renderInput:function(){this._$buttonsContainer=this._$textEditorContainer=l("<div>").addClass(ma).appendTo(this.$element()),this._$textEditorInputContainer=l("<div>").addClass(fa).appendTo(this._$textEditorContainer),this._$textEditorInputContainer.append(this._createInput()),this._renderButtonContainers()},_getInputContainer(){return this._$textEditorInputContainer},_renderPendingIndicator:function(){this.$element().addClass(ue);var t=this._getInputContainer(),e=l("<div>").addClass(ba).appendTo(t);this._pendingIndicator=this._createComponent(e,gi)},_disposePendingIndicator:function(){this._pendingIndicator&&(this._pendingIndicator.dispose(),this._pendingIndicator.$element().remove(),this._pendingIndicator=null,this.$element().removeClass(ue))},_renderValidationState:function(){this.callBase();var t=this.option("validationStatus")==="pending",e=this.$element();t?(!this._pendingIndicator&&this._renderPendingIndicator(),this._showValidMark=!1):(this.option("validationStatus")==="invalid"&&(this._showValidMark=!1),!this._showValidMark&&this.option("showValidationMark")===!0&&(this._showValidMark=this.option("validationStatus")==="valid"&&!!this._pendingIndicator),this._disposePendingIndicator()),e.toggleClass(ya,!!this._showValidMark)},_renderButtonContainers:function(){var t=this.option("buttons");this._$beforeButtonsContainer=this._buttonCollection.renderBeforeButtons(t,this._$buttonsContainer),this._$afterButtonsContainer=this._buttonCollection.renderAfterButtons(t,this._$buttonsContainer)},_cleanButtonContainers:function(){var t,e;(t=this._$beforeButtonsContainer)===null||t===void 0||t.remove(),(e=this._$afterButtonsContainer)===null||e===void 0||e.remove(),this._buttonCollection.clean()},_clean(){this._buttonCollection.clean(),this._disposePendingIndicator(),this._unobserveLabelContainerResize(),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._$textEditorContainer=null,this._$buttonsContainer=null,this.callBase()},_createInput:function(){var t=l("<input>");return this._applyInputAttributes(t,this.option("inputAttr")),t},_setSubmitElementName:function(t){var e=this.option("inputAttr.name");return this.callBase(t||e||"")},_applyInputAttributes:function(t,e){var i=d(this._getDefaultAttributes(),e);t.attr(i).addClass(Ke).css("minHeight",this.option("height")?"0":"")},_getDefaultAttributes:function(){var t={autocomplete:"off"},{ios:e,mac:i}=E.real();return(e||i)&&(t.placeholder=" "),t},_updateButtons:function(t){this._buttonCollection.updateButtons(t)},_updateButtonsStyling:function(t){S(this.option("buttons"),(e,i)=>{var{options:n,name:a}=i;if(n&&!n.stylingMode&&this.option("visible")){var s=this.getButton(a);s.option&&s.option("stylingMode",t==="underlined"?"text":"contained")}})},_renderValue:function(){var t=this._renderInputValue();return t.promise()},_renderInputValue:function(t){var e;t=(e=t)!==null&&e!==void 0?e:this.option("value");var i=this.option("text"),n=this.option("displayValue"),a=this.option("displayValueFormatter");return n!==void 0&&t!==null?i=a(n):m(i)||(i=a(t)),this.option("text",i),this._input().val()!==(m(i)?i:"")?this._renderDisplayText(i):this._toggleEmptinessEventHandler(),new R().resolve()},_renderDisplayText:function(t){this._input().val(t),this._toggleEmptinessEventHandler()},_isValueValid:function(){if(this._input().length){var t=this._input().get(0).validity;if(t)return t.valid}return!0},_toggleEmptiness:function(t){this.$element().toggleClass(Ca,t),this._togglePlaceholder(t)},_togglePlaceholder:function(t){this.$element().find(".".concat(he)).eq(0).toggleClass(Ea,!t)},_renderProps:function(){this._toggleReadOnlyState(),this._toggleSpellcheckState(),this._toggleTabIndex()},_toggleDisabledState:function(t){this.callBase.apply(this,arguments);var e=this._input();e.prop("disabled",t)},_toggleTabIndex:function(){var t=this._input(),e=this.option("disabled"),i=this.option("focusStateEnabled");e||!i?t.attr("tabIndex",-1):t.removeAttr("tabIndex")},_toggleReadOnlyState:function(){this._input().prop("readOnly",this._readOnlyPropValue()),this.callBase()},_readOnlyPropValue:function(){return this.option("readOnly")},_toggleSpellcheckState:function(){this._input().prop("spellcheck",this.option("spellcheck"))},_unobserveLabelContainerResize:function(){this._labelContainerElement&&(lt.unobserve(this._labelContainerElement),this._labelContainerElement=null)},_getLabelContainer:function(){return this._input()},_getLabelContainerWidth:function(){return z(this._getLabelContainer())},_getLabelBeforeWidth:function(){var t=this._$beforeButtonsContainer&&z(this._$beforeButtonsContainer);return t??0},_updateLabelWidth:function(){this._label.updateBeforeWidth(this._getLabelBeforeWidth()),this._label.updateMaxWidth(this._getLabelContainerWidth())},_setLabelContainerAria:function(){this.setAria("labelledby",this._label.getId(),this._getLabelContainer())},_renderLabel:function(){this._unobserveLabelContainerResize(),this._labelContainerElement=l(this._getLabelContainer()).get(0);var{label:t,labelMode:e,labelMark:i}=this.option(),n={$editor:this.$element(),text:t,mark:i,mode:e,containsButtonsBefore:!!this._$beforeButtonsContainer,containerWidth:this._getLabelContainerWidth(),beforeWidth:this._getLabelBeforeWidth()};this._label=new Ta(n),this._setLabelContainerAria(),this._labelContainerElement&&lt.observe(this._labelContainerElement,this._updateLabelWidth.bind(this))},_renderPlaceholder:function(){this._renderPlaceholderMarkup(),this._attachPlaceholderEvents()},_renderPlaceholderMarkup:function(){this._$placeholder&&(this._$placeholder.remove(),this._$placeholder=null);var t=this._input(),e=this.option("placeholder"),i=this._$placeholder=l("<div>").attr("data-dx_placeholder",e);i.insertAfter(t),i.addClass(he)},_attachPlaceholderEvents:function(){var t=f(ht.up,this.NAME);h.on(this._$placeholder,t,()=>{h.trigger(this._input(),"focus")}),this._toggleEmptinessEventHandler()},_placeholder:function(){return this._$placeholder||l()},_clearValueHandler:function(t){var e=this._input();t.stopPropagation(),this._saveValueChangeEvent(t),this._clearValue(),!this._isFocused()&&h.trigger(e,"focus"),h.trigger(e,"input")},_clearValue:function(){this.reset()},_renderEvents:function(){var t=this._input();S(tt,(e,i)=>{if(this.hasActionSubscription("on"+i)){var n=this._createActionByOption("on"+i,{excludeValidators:["readOnly"]});h.on(t,f(i.toLowerCase(),this.NAME),a=>{this._disposed||n({event:a})})}})},_refreshEvents:function(){var t=this._input();S(tt,(e,i)=>{h.off(t,f(i.toLowerCase(),this.NAME))}),this._renderEvents()},_keyPressHandler:function(){this.option("text",this._input().val())},_keyDownHandler:function(t){var e=this._input(),i=t.ctrlKey&&F(t)==="enter",n=e.val()!==this.option("value");i&&n&&h.trigger(e,"change")},_getValueChangeEventOptionName:function(){return"valueChangeEvent"},_renderValueChangeEvent:function(){var t=f(this._renderValueEventName(),"".concat(this.NAME,"TextChange")),e=f(this.option(this._getValueChangeEventOptionName()),"".concat(this.NAME,"ValueChange")),i=f("keydown","".concat(this.NAME,"TextChange")),n=this._input();h.on(n,t,this._keyPressHandler.bind(this)),h.on(n,e,this._valueChangeEventHandler.bind(this)),h.on(n,i,this._keyDownHandler.bind(this))},_cleanValueChangeEvent:function(){var t=".".concat(this.NAME,"ValueChange"),e=".".concat(this.NAME,"TextChange");h.off(this._input(),t),h.off(this._input(),e)},_refreshValueChangeEvent:function(){this._cleanValueChangeEvent(),this._renderValueChangeEvent()},_renderValueEventName:function(){return"input change keypress"},_focusTarget:function(){return this._input()},_focusEventTarget:function(){return this.element()},_isInput:function(t){return t===this._input().get(0)},_preventNestedFocusEvent:function(t){if(t.isDefaultPrevented())return!0;var e=this._isNestedTarget(t.relatedTarget);return t.type==="focusin"?e=e&&this._isNestedTarget(t.target)&&!this._isInput(t.target):e||this._toggleFocusClass(!1,this.$element()),e&&t.preventDefault(),e},_isNestedTarget:function(t){return!!this.$element().find(t).length},_focusClassTarget:function(){return this.$element()},_focusInHandler:function(t){this._preventNestedFocusEvent(t),this.callBase.apply(this,arguments)},_focusOutHandler:function(t){this._preventNestedFocusEvent(t),this.callBase.apply(this,arguments)},_toggleFocusClass:function(t,e){this.callBase(t,this._focusClassTarget(e))},_hasFocusClass:function(t){return this.callBase(l(t||this.$element()))},_renderEmptinessEvent:function(){var t=this._input();h.on(t,"input blur",this._toggleEmptinessEventHandler.bind(this))},_toggleEmptinessEventHandler:function(){var t=this._input().val(),e=(t===""||t===null)&&this._isValueValid();this._toggleEmptiness(e)},_valueChangeEventHandler:function(t,e){this.option("readOnly")||(this._saveValueChangeEvent(t),this.option("value",arguments.length>1?e:this._input().val()),this._saveValueChangeEvent(void 0))},_renderEnterKeyAction:function(){this._enterKeyAction=this._createActionByOption("onEnterKey",{excludeValidators:["readOnly"]}),h.off(this._input(),"keyup.onEnterKey.dxTextEditor"),h.on(this._input(),"keyup.onEnterKey.dxTextEditor",this._enterKeyHandlerUp.bind(this))},_enterKeyHandlerUp:function(t){this._disposed||F(t)==="enter"&&this._enterKeyAction({event:t})},_updateValue:function(){this._options.silent("text",null),this._renderValue()},_dispose:function(){this._enterKeyAction=void 0,this.callBase()},_getSubmitElement:function(){return this._input()},_hasActiveElement:function(){return this._input().is(W.getActiveElement(this._input()[0]))},_optionChanged:function(t){var{name:e,fullName:i,value:n}=t,a=e.replace("on","");if(tt.includes(a)){this._refreshEvents();return}switch(e){case"valueChangeEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onValueChanged":this._createValueChangeAction();break;case"focusStateEnabled":this.callBase(t),this._toggleTabIndex();break;case"spellcheck":this._toggleSpellcheckState();break;case"mode":this._renderInputType();break;case"onEnterKey":this._renderEnterKeyAction();break;case"placeholder":this._renderPlaceholder();break;case"label":this._label.updateText(n),this._setLabelContainerAria();break;case"labelMark":this._label.updateMark(n);break;case"labelMode":this._label.updateMode(n),this._setLabelContainerAria();break;case"width":this.callBase(t),this._label.updateMaxWidth(this._getLabelContainerWidth());break;case"readOnly":case"disabled":this._updateButtons(),this.callBase(t);break;case"showClearButton":this._updateButtons(["clear"]);break;case"text":break;case"value":this._updateValue(),this.callBase(t);break;case"inputAttr":this._applyInputAttributes(this._input(),this.option(e));break;case"stylingMode":this._renderStylingMode(),this._updateLabelWidth();break;case"buttons":i===e&&de(n),this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")),this._updateLabelWidth(),this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);break;case"visible":this.callBase(t),n&&this.option("buttons")&&(this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")));break;case"displayValueFormatter":this._invalidate();break;case"showValidationMark":break;default:this.callBase(t)}},_renderInputType:function(){this._setInputType(this.option("mode"))},_setInputType:function(t){var e=this._input();t==="search"&&(t="text");try{e.prop("type",t)}catch{e.prop("type","text")}},getButton(t){return this._buttonCollection.getButton(t)},focus:function(){h.trigger(this._input(),"focus")},reset:function(){this._showValidMark&&(this._showValidMark=!1,this._renderValidationState());var t=this._getDefaultOptions();this.option("value")===t.value?(this._options.silent("text",""),this._renderValue()):this.option("value",t.value)},on:function(t,e){var i=this.callBase(t,e),n=t.charAt(0).toUpperCase()+t.substr(1);return tt.indexOf(n)>=0&&this._refreshEvents(),i}});const Aa=Oa;var Ct="dxMask",xa="blur beforedeactivate",Ia=" ";class Ge{constructor(e){this.editor=e,this.DIRECTION={FORWARD:"forward",BACKWARD:"backward"},this.NAME=this._getStrategyName()}_getStrategyName(){return"base"}editorOption(){return this.editor.option(...arguments)}editorInput(){return this.editor._input()}editorCaret(e){if(!e)return this.editor._caret();this.editor._caret(e)}getHandler(e){var i=this["_".concat(e,"Handler")]||function(){};return i.bind(this)}attachEvents(){var e=this.editorInput();this.getHandleEventNames().forEach(i=>{var n=f(i.toLowerCase(),Ct);h.on(e,n,this.getEventHandler(i))}),this._attachChangeEventHandlers()}getHandleEventNames(){return["focusIn","focusOut","keyDown","input","paste","cut","drop"]}getEventHandler(e){return this["_".concat(e,"Handler")].bind(this)}detachEvents(){h.off(this.editorInput(),".".concat(Ct))}_attachChangeEventHandlers(){this.editorOption("valueChangeEvent").split(" ").includes("change")&&h.on(this.editorInput(),f(xa,Ct),function(e){this._suppressCaretChanging(this._changeHandler,[e]),this._changeHandler(e)}.bind(this.editor))}_focusInHandler(){if(this.editor._showMaskPlaceholder(),this.editor._direction(this.DIRECTION.FORWARD),!this.editor._isValueEmpty()&&this.editorOption("isValid"))this.editor._adjustCaret();else{var e=this.editor._maskRulesChain.first();this._caretTimeout=setTimeout(function(){this._caret({start:e,end:e})}.bind(this.editor),0)}}_focusOutHandler(e){this.editor._changeHandler(e),this.editorOption("showMaskMode")==="onFocus"&&this.editor._isValueEmpty()&&(this.editorOption("text",""),this.editor._renderDisplayText(""))}_cutHandler(e){var i=this.editorCaret(),n=this.editorInput().val().substring(i.start,i.end);this.editor._maskKeyHandler(e,()=>Nt(e,n))}_dropHandler(){this._clearDragTimer(),this._dragTimer=setTimeout(function(){this.option("value",this._convertToValue(this._input().val()))}.bind(this.editor))}_clearDragTimer(){clearTimeout(this._dragTimer)}_keyDownHandler(){this._keyPressHandled=!1}_pasteHandler(e){var{editor:i}=this;this._keyPressHandled=!0;var n=this.editorCaret();i._maskKeyHandler(e,()=>{var a=Nt(e),s=i._maskRulesChain.text().substring(n.end),r=i._handleChain({text:a,start:n.start,length:a.length}),u=n.start+r;i._handleChain({text:s,start:u,length:s.length}),i._caret({start:u,end:u})})}_autoFillHandler(e){var{editor:i}=this,n=this.editorInput().val();this._inputHandlerTimer=setTimeout(()=>{this._keyPressHandled=!0,this._isAutoFill()&&(this._keyPressHandled=!0,i._maskKeyHandler(e,()=>{i._handleChain({text:n,start:0,length:n.length})}),i._validateMask())})}_isAutoFill(){var e=this.editor._input(),i=!1;if(st.webkit){var n=e.get(0);i=n&&n.matches(":-webkit-autofill")}return i}runWithoutEventProcessing(e){var i=this._keyPressHandled;this._keyPressHandled=!0,e(),this._keyPressHandled=i}_backspaceHandler(){}_delHandler(e){var{editor:i}=this;this._keyPressHandled=!0,i._maskKeyHandler(e,()=>!i._hasSelection()&&i._handleKey(Ia))}clean(){this._clearDragTimer(),clearTimeout(this._backspaceHandlerTimeout),clearTimeout(this._caretTimeout),clearTimeout(this._inputHandlerTimer)}}var Ba="deleteContentBackward",wa=" ";class Da extends Ge{_getStrategyName(){return"default"}getHandleEventNames(){return[...super.getHandleEventNames(),"keyPress"]}_keyPressHandler(e){if(!this._keyPressHandled&&(this._keyPressHandled=!0,!this.editor._isControlKeyFired(e))){var{editor:i}=this;i._maskKeyHandler(e,()=>i._handleKey(Ci(e)))}}_inputHandler(e){if(this._backspaceInputHandled(e.originalEvent&&e.originalEvent.inputType)&&this._handleBackspaceInput(e),e.originalEvent&&this._autoFillHandler(e),!this._keyPressHandled){this._keyPressHandled=!0;var i=this.editorInput().val(),n=this.editorCaret();if(n.end){n.start=n.end-1;var a=i.substring(0,n.start)+i.substring(n.end),s=i[n.start],{editor:r}=this;this.editorInput().val(a),r._caret({start:n.start,end:n.start}),r._maskKeyHandler(e,()=>r._handleKey(s))}}}_backspaceHandler(e){var{editor:i}=this;this._keyPressHandled=!0;var n=(a,s)=>{a&&(i._direction(this.DIRECTION.FORWARD),i._adjustCaret());var r=this.editorCaret();return new Promise(u=>{clearTimeout(this._backspaceHandlerTimeout),this._backspaceHandlerTimeout=setTimeout(function(){s(r),u()})})};i._maskKeyHandler(e,()=>i._hasSelection()?n(!0,a=>{i._displayMask(a),i._maskRulesChain.reset()}):i._tryMoveCaretBackward()?n(!1,a=>{this.editorCaret(a)}):(i._handleKey(wa,this.DIRECTION.BACKWARD),n(!0,a=>{i._displayMask(a),i._maskRulesChain.reset()})))}_backspaceInputHandled(e){return e===Ba&&!this._keyPressHandled}_handleBackspaceInput(e){var{start:i,end:n}=this.editorCaret();this.editorCaret({start:i+1,end:n+1}),this._backspaceHandler(e)}}const ka=Da;var Va="deleteContentBackward";class Ra extends Ge{_getStrategyName(){return"inputEvents"}getHandleEventNames(){return[...super.getHandleEventNames(),"beforeInput"]}_beforeInputHandler(){this._prevCaret=this.editorCaret()}_inputHandler(e){var{originalEvent:i}=e;if(i){var{inputType:n,data:a}=i,s=this.editorCaret();if(n===Va){var r=this._prevCaret.end-this._prevCaret.start||1;this.editor.setBackwardDirection(),this._updateEditorMask({start:s.start,length:r,text:this._getEmptyString(r)})}else{var u,c,v;if(!s.end)return;this._autoFillHandler(i),this.editorCaret(s);var b=((u=this._prevCaret)===null||u===void 0?void 0:u.end)-((c=this._prevCaret)===null||c===void 0?void 0:c.start),y=a+(b?this._getEmptyString(b-a.length):"");this.editor.setForwardDirection();var T=this._updateEditorMask({start:(v=this._prevCaret)===null||v===void 0?void 0:v.start,length:b||y.length,text:y});T||this.editorCaret(this._prevCaret)}}}_getEmptyString(e){return Array(e+1).join(" ")}_updateEditorMask(e){var i=e.text.length,n=this.editor._handleChain(e);if(this.editor.isForwardDirection()){var{start:a,end:s}=this.editorCaret(),r=n-i;a<=n&&n>1&&this.editorCaret({start:a+r,end:s+r}),this.editor.isForwardDirection()&&this.editor._adjustCaret()}return this.editor._displayMask(),!!n}}const Pa=Ra;var Ma=function(){return{}},et=Fe,ce=" ",$a="\\",pe="dx-texteditor-masked",Et="forward",Ha="backward",La={0:/[0-9]/,9:/[0-9\s]/,"#":/[-+0-9\s]/,L:function(t){return it(t)},l:function(t){return it(t)||fe(t)},C:/\S/,c:/./,A:function(t){return it(t)||_e(t)},a:function(t){return it(t)||_e(t)||fe(t)}};function _e(t){return/[0-9]/.test(t)}function it(t){var e=t.charCodeAt();return 64<e&&e<91||96<e&&e<123||e>127}function fe(t){return t===" "}var Na=Aa.inherit({_getDefaultOptions:function(){return d(this.callBase(),{mask:"",maskChar:"_",maskRules:{},maskInvalidMessage:P.format("validation-mask"),useMaskedValue:!1,showMaskMode:"always"})},_supportedKeys:function(){var t=this,e={backspace:t._maskStrategy.getHandler("backspace"),del:t._maskStrategy.getHandler("del"),enter:t._changeHandler},i=t.callBase();return S(e,function(n,a){var s=i[n];i[n]=function(r){t.option("mask")&&a.call(t,r),s&&s(r)}}),i},_getSubmitElement:function(){return this.option("mask")?this._$hiddenElement:this.callBase()},_init:function(){this.callBase(),this._initMaskStrategy()},_initMaskStrategy:function(){this._maskStrategy=qn()?new Pa(this):new ka(this)},_initMarkup:function(){this._renderHiddenElement(),this.callBase()},_attachMouseWheelEventHandlers:function(){var t=this._onMouseWheel!==_;if(t){var e=this._input(),i=f(Ei,this.NAME),n=this._createAction(function(a){var{event:s}=a;X(e)&&!rt(s)&&(this._onMouseWheel(s),s.preventDefault(),s.stopPropagation())}.bind(this));h.off(e,i),h.on(e,i,function(a){n({event:a})})}},_onMouseWheel:_,_render:function(){this._renderMask(),this.callBase(),this._attachMouseWheelEventHandlers()},_renderHiddenElement:function(){this.option("mask")&&(this._$hiddenElement=l("<input>").attr("type","hidden").appendTo(this._inputWrapper()))},_removeHiddenElement:function(){this._$hiddenElement&&this._$hiddenElement.remove()},_renderMask:function(){this.$element().removeClass(pe),this._maskRulesChain=null,this._maskStrategy.detachEvents(),this.option("mask")&&(this.$element().addClass(pe),this._maskStrategy.attachEvents(),this._parseMask(),this._renderMaskedValue())},_suppressCaretChanging:function(t,e){et=Ma;try{t.apply(this,e)}finally{et=Fe}},_changeHandler:function(t){var e=this._input(),i=e.val();if(i!==this._changedValue){this._changedValue=i;var n=bi(t,{type:"change"});h.trigger(e,n)}},_parseMask:function(){this._maskRules=d({},La,this.option("maskRules")),this._maskRulesChain=this._parseMaskRule(0)},_parseMaskRule:function(t){var e=this.option("mask");if(t>=e.length)return new Zn;var i=e[t],n=i===$a,a=n?new ie({maskChar:e[t+1]}):this._getMaskRule(i);return a.next(this._parseMaskRule(t+1+n)),a},_getMaskRule:function(t){var e;return S(this._maskRules,function(i,n){if(i===t)return e={pattern:i,allowedChars:n},!1}),m(e)?new We(d({maskChar:this.option("maskChar")},e)):new ie({maskChar:t})},_renderMaskedValue:function(){if(this._maskRulesChain){var t=this.option("value")||"";this._maskRulesChain.clear(this._normalizeChainArguments());var e={length:t.length};e[this._isMaskedValueMode()?"text":"value"]=t,this._handleChain(e),this._displayMask()}},_replaceSelectedText:function(t,e,i){if(i===void 0)return t;var n=t.slice(0,e.start),a=t.slice(e.end),s=n+i+a;return s},_isMaskedValueMode:function(){return this.option("useMaskedValue")},_displayMask:function(t){t=t||this._caret(),this._renderValue(),this._caret(t)},_isValueEmpty:function(){return vt(this._value)},_shouldShowMask:function(){var t=this.option("showMaskMode");return t==="onFocus"?X(this._input())||!this._isValueEmpty():!0},_showMaskPlaceholder:function(){if(this._shouldShowMask()){var t=this._maskRulesChain.text();this.option("text",t),this.option("showMaskMode")==="onFocus"&&this._renderDisplayText(t)}},_renderValue:function(){if(this._maskRulesChain&&(this._showMaskPlaceholder(),this._$hiddenElement)){var t=this._maskRulesChain.value(),e=vt(t)?"":this._getPreparedValue();this._$hiddenElement.val(e)}return this.callBase()},_getPreparedValue:function(){return this._convertToValue().replace(/\s+$/,"")},_valueChangeEventHandler:function(t){if(!this._maskRulesChain){this.callBase.apply(this,arguments);return}this._saveValueChangeEvent(t),this.option("value",this._getPreparedValue())},_isControlKeyFired:function(t){return this._isControlKey(F(t))||rt(t)},_handleChain:function(t){var e=this._maskRulesChain.handle(this._normalizeChainArguments(t));return this._value=this._maskRulesChain.value(),this._textValue=this._maskRulesChain.text(),e},_normalizeChainArguments:function(t){return t=t||{},t.index=0,t.fullText=this._maskRulesChain.text(),t},_convertToValue:function(t){return this._isMaskedValueMode()?t=this._replaceMaskCharWithEmpty(t||this._textValue||""):t=t||this._value||"",t},_replaceMaskCharWithEmpty:function(t){return t.replace(new RegExp(this.option("maskChar"),"g"),ce)},_maskKeyHandler:function(t,e){if(!this.option("readOnly")){this.setForwardDirection(),t.preventDefault(),this._handleSelection();var i=this._input().val(),n=()=>{i!==this._input().val()&&this._maskStrategy.runWithoutEventProcessing(()=>h.trigger(this._input(),"input"))},a=e();a?a.then(n):(this.setForwardDirection(),this._adjustCaret(),this._displayMask(),this._maskRulesChain.reset(),n())}},_handleKey:function(t,e){this._direction(e||Et),this._adjustCaret(t),this._handleKeyChain(t),this._moveCaret()},_handleSelection:function(){if(this._hasSelection()){var t=this._caret(),e=new Array(t.end-t.start+1).join(ce);this._handleKeyChain(e)}},_handleKeyChain:function(t){var e=this._caret(),i=this.isForwardDirection()?e.start:e.start-1,n=this.isForwardDirection()?e.end:e.end-1,a=i===n?1:n-i;this._handleChain({text:t,start:i,length:a})},_tryMoveCaretBackward:function(){this.setBackwardDirection();var t=this._caret().start;return this._adjustCaret(),!t||t!==this._caret().start},_adjustCaret:function(t){var e=this._caret().start,i=this.isForwardDirection(),n=this._maskRulesChain.adjustedCaret(e,i,t);this._caret({start:n,end:n})},_moveCaret:function(){var t=this._caret().start,e=t+(this.isForwardDirection()?0:-1),i=this._maskRulesChain.isAccepted(e)?t+(this.isForwardDirection()?1:-1):t;this._caret({start:i,end:i})},_caret:function(t,e){var i=this._input();if(i.length){if(!arguments.length)return et(i);et(i,t,e)}},_hasSelection:function(){var t=this._caret();return t.start!==t.end},_direction:function(t){if(!arguments.length)return this._typingDirection;this._typingDirection=t},setForwardDirection:function(){this._direction(Et)},setBackwardDirection:function(){this._direction(Ha)},isForwardDirection:function(){return this._direction()===Et},_clean:function(){this._maskStrategy&&this._maskStrategy.clean(),this.callBase()},_validateMask:function(){if(this._maskRulesChain){var t=vt(this.option("value"))||this._maskRulesChain.isValid(this._normalizeChainArguments());this.option({isValid:t,validationError:t?null:{editorSpecific:!0,message:this.option("maskInvalidMessage")}})}},_updateHiddenElement:function(){this._removeHiddenElement(),this.option("mask")&&(this._input().removeAttr("name"),this._renderHiddenElement()),this._setSubmitElementName(this.option("name"))},_updateMaskOption:function(){this._updateHiddenElement(),this._renderMask(),this._validateMask()},_processEmptyMask:function(t){if(!t){var e=this.option("value");this.option({text:e,isValid:!0}),this.validationRequest.fire({value:e,editor:this}),this._renderValue()}},_optionChanged:function(t){switch(t.name){case"mask":this._updateMaskOption(),this._processEmptyMask(t.value);break;case"maskChar":case"maskRules":case"useMaskedValue":this._updateMaskOption();break;case"value":this._renderMaskedValue(),this._validateMask(),this.callBase(t),this._changedValue=this._input().val();break;case"maskInvalidMessage":break;case"showMaskMode":this.option("text",""),this._renderValue();break;default:this.callBase(t)}}});const Ue=Na;V("dxTextEditor",Ue);var Fa=K(),za=["backspace","tab","enter","pageUp","pageDown","end","home","leftArrow","rightArrow","downArrow","upArrow","del"],Wa="dx-textbox",ve="dx-searchbox",Ka="dx-icon",Ga="dx-icon-search",je=Ue.inherit({ctor:function(t,e){e&&(this._showClearButton=e.showClearButton),this.callBase.apply(this,arguments)},_getDefaultOptions:function(){return d(this.callBase(),{value:"",mode:"text",maxLength:null})},_initMarkup:function(){this.$element().addClass(Wa),this.callBase(),this.setAria("role","textbox")},_renderInputType:function(){this.callBase(),this._renderSearchMode()},_useTemplates:function(){return!1},_renderProps:function(){this.callBase(),this._toggleMaxLengthProp()},_toggleMaxLengthProp:function(){var t=this._getMaxLength();t&&t>0?this._input().attr("maxLength",t):this._input().removeAttr("maxLength")},_renderSearchMode:function(){var t=this._$element;this.option("mode")==="search"?(t.addClass(ve),this._renderSearchIcon(),this._showClearButton===void 0&&(this._showClearButton=this.option("showClearButton"),this.option("showClearButton",!0))):(t.removeClass(ve),this._$searchIcon&&this._$searchIcon.remove(),this.option("showClearButton",this._showClearButton===void 0?this.option("showClearButton"):this._showClearButton),delete this._showClearButton)},_renderSearchIcon:function(){var t=l("<div>").addClass(Ka).addClass(Ga);t.prependTo(this._input().parent()),this._$searchIcon=t},_getLabelContainerWidth:function(){if(this._$searchIcon){var t=this._input().parent();return z(t)-this._getLabelBeforeWidth()}return this.callBase()},_getLabelBeforeWidth:function(){var t=this.callBase();return this._$searchIcon&&(t+=A(this._$searchIcon)),t},_optionChanged:function(t){switch(t.name){case"maxLength":this._toggleMaxLengthProp();break;case"mode":this.callBase(t),this._updateLabelWidth();break;case"mask":this.callBase(t),this._toggleMaxLengthProp();break;default:this.callBase(t)}},_onKeyDownCutOffHandler:function(t){var e=this._getMaxLength();if(e&&!t.ctrlKey&&!this._hasSelection()){var i=l(t.target),n=F(t);return this._cutOffExtraChar(i),i.val().length<e||za.includes(n)||Fa.getSelection().toString()!==""}else return!0},_onChangeCutOffHandler:function(t){var e=l(t.target);this.option("maxLength")&&this._cutOffExtraChar(e)},_cutOffExtraChar:function(t){var e=this._getMaxLength(),i=t.val();e&&i.length>e&&t.val(i.substr(0,e))},_getMaxLength:function(){var t=!!this.option("mask");return t?null:this.option("maxLength")}});V("dxTextBox",je);const Ua=je;var p={},ja="dx-dropdowneditor-button",Xa="dx-dropdowneditor-button-visible",Ya="dxDropDownEditor-selectLabel";class qa extends Bt{constructor(e,i,n){super(e,i,n),this.currentTemplate=null}_attachEvents(e){var{editor:i}=this;e.option("onClick",n=>{!i.option("openOnFieldClick")&&i._openHandler(n)}),h.on(e.$element(),"mousedown",n=>{i.$element().is(".dx-state-focused")&&n.preventDefault()})}_create(){var{editor:e}=this,i=l("<div>"),n=this._getOptions();this._addToContainer(i);var a=e._createComponent(i,ot,d({},n,{elementAttr:{"aria-label":P.format(Ya)}}));return this._legacyRender(e.$element(),i,n.visible),{$element:i,instance:a}}_getOptions(){var{editor:e}=this,i=this._isVisible(),n=e.option("readOnly"),a={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:n,visible:i};return this._addTemplate(a),a}_isVisible(){var{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,i,n){e.toggleClass(Xa,n),i&&i.removeClass("dx-button").addClass(ja)}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){var e=super.update();if(e){var{editor:i,instance:n}=this,a=i.$element(),s=this._getOptions();n==null||n.option(s),this._legacyRender(a,n==null?void 0:n.$element(),s.visible)}}}var me=function(t){if(k())return A(t)},Za=function(t){return t===null&&(t=void 0),typeof t=="function"&&(t=t()),t},Qa="dx-dropdowneditor",ge="dx-dropdowneditor-input-wrapper",Ja="dx-dropdowneditor-icon",nt="dx-dropdowneditor-overlay",ts="dx-dropdowneditor-overlay-flipped",es="dx-dropdowneditor-active",is="dx-dropdowneditor-field-clickable",ns="dx-dropdowneditor-field-template-wrapper",Ce=E.current().platform==="ios",Xe=Ua.inherit({_supportedKeys:function(){return d({},this.callBase(),{tab:function(t){if(this.option("opened")){if(this.option("applyValueMode")==="instantly"){this.close();return}var e=t.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();e&&h.trigger(e,"focus"),t.preventDefault()}},escape:function(t){return this.option("opened")&&t.preventDefault(),this.close(),!0},upArrow:function(t){return!rt(t)&&(t.preventDefault(),t.stopPropagation(),t.altKey)?(this.close(),!1):!0},downArrow:function(t){return!rt(t)&&(t.preventDefault(),t.stopPropagation(),t.altKey)?(this._validatedOpening(),!1):!0},enter:function(t){return this.option("opened")&&(t.preventDefault(),this._valueChangeEventHandler(t)),!0}})},_getDefaultButtons:function(){return this.callBase().concat([{name:"dropDown",Ctor:qa}])},_getDefaultOptions:function(){return d(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:P.format("OK"),cancelButtonText:P.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:function(){return!0},_getDefaultPopupPosition:function(t){var e=xe(t);return{offset:{h:0,v:-1},my:e+" top",at:e+" bottom",collision:"flip flip"}},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(t){var e=t.platform==="generic";return e},options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper:function(){return this.$element().find("."+ge).first()},_init:function(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition:function(t){var{my:e,at:i}=this._getDefaultPopupPosition(t),n=this.option("popupPosition");this.option("popupPosition",d({},n,{my:e,at:i}))},_initVisibilityActions:function(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction:function(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup:function(){this._renderSubmitElement(),this.callBase(),this.$element().addClass(Qa),this.setAria("role","combobox")},_render:function(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl:function(){this.option("deferRendering")||this._createPopup()},_renderInput:function(){this.callBase(),this._wrapInput(),this._setDefaultAria()},_wrapInput:function(){this._$container=this.$element().wrapInner(l("<div>").addClass(ge)).children().eq(0)},_setDefaultAria:function(){this.setAria({haspopup:"true",autocomplete:"list"})},_readOnlyPropValue:function(){return!this._isEditable()||this.callBase()},_cleanFocusState:function(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate:function(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask:function(){this.option("fieldTemplate")||this.callBase()},_renderField:function(){var t=this._getFieldTemplate();t&&this._renderTemplatedField(t,this._fieldRenderData())},_renderPlaceholder:function(){var t=!!this._getFieldTemplate();t||this.callBase()},_renderValue:function(){this.option("useHiddenSubmitElement")&&this._setSubmitValue();var t=this.callBase();t.always(this._renderField.bind(this))},_renderTemplatedField:function(t,e){var i;this._fieldRenderQueueLength=((i=this._fieldRenderQueueLength)!==null&&i!==void 0?i:0)+1;var n=X(this._input()),a=this._$container;this._detachKeyboardEvents(),this._refreshButtonsContainer(),this._detachWrapperContent(),this._detachFocusEvents(),a.empty();var s=l("<div>").addClass(ns).appendTo(a);t.render({model:e,container:N(s),onRendered:()=>{if(this._fieldRenderQueueLength--,this._fieldRenderQueueLength===0){var r=this._input();if(!r.length)throw D.Error("E1010");this._integrateInput(),n&&h.trigger(r,"focus")}}}),this._attachWrapperContent(a)},_detachWrapperContent(){var t,e,i,n=this.option("useHiddenSubmitElement");n&&((t=this._$submitElement)===null||t===void 0||t.detach());var a=(e=this._$beforeButtonsContainer)===null||e===void 0?void 0:e[0].parentNode,s=(i=this._$afterButtonsContainer)===null||i===void 0?void 0:i[0].parentNode;a==null||a.removeChild(this._$beforeButtonsContainer[0]),s==null||s.removeChild(this._$afterButtonsContainer[0])},_attachWrapperContent(t){var e,i=this.option("useHiddenSubmitElement");t.prepend(this._$beforeButtonsContainer),i&&((e=this._$submitElement)===null||e===void 0||e.appendTo(t)),t.append(this._$afterButtonsContainer)},_refreshButtonsContainer(){this._$buttonsContainer=this.$element().children().eq(0)},_integrateInput:function(){this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent()},_refreshEmptinessEvent:function(){h.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData:function(){return this.option("value")},_initTemplates:function(){this._templateManager.addDefaultTemplates({dropDownButton:new yi(function(t){var e=l("<div>").addClass(Ja);l(t.container).append(e)})}),this.callBase()},_renderOpenHandler:function(){var t=this._inputWrapper(),e=f(At,this.NAME),i=this.option("openOnFieldClick");h.off(t,e),h.on(t,e,this._getInputClickHandler(i)),this.$element().toggleClass(is,i),i&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler:function(){Ce&&(this._detachFocusOutEvents(),h.on(this._inputWrapper(),f("focusout",this.NAME),t=>{var e=t.relatedTarget,i=this.content?l(this.content()).closest("."+nt):this._$popup;if(e&&this.option("opened")){var n=l(e).closest("."+nt,i).length===0;n&&this.close()}}))},_detachFocusOutEvents:function(){Ce&&h.off(this._inputWrapper(),f("focusout",this.NAME))},_getInputClickHandler:function(t){return t?e=>{this._executeOpenAction(e)}:e=>{this._focusInput()}},_openHandler:function(){this._toggleOpenState()},_executeOpenAction:function(t){this._openOnFieldClickAction({event:t})},_keyboardEventBindingTarget:function(){return this._input()},_focusInput:function(){return this.option("disabled")?!1:(this.option("focusStateEnabled")&&!X(this._input())&&(this._resetCaretPosition(),h.trigger(this._input(),"focus")),!0)},_resetCaretPosition:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this._input().get(0);if(e){var{value:i}=e,n=m(i)&&(t||this._isEditable())?i.length:0;this._caret({start:n,end:n},!0)}},_isEditable:function(){return this.option("acceptCustomValue")},_toggleOpenState:function(t){this._focusInput()&&(this.option("readOnly")||(t=arguments.length?t:!this.option("opened"),this.option("opened",t)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState:function(){var t=this.option("opened");t&&this._createPopup(),this.$element().toggleClass(es,t),this._setPopupOption("visible",t);var e={expanded:t,controls:this._getControlsAria()};this.setAria(e),this.setAria("owns",t?this._popupContentId:void 0,this.$element())},_createPopup:function(){this._$popup||(this._$popup=l("<div>").addClass(nt).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent())},_renderPopupContent:_,_renderPopup:function(){var t=d(this._popupConfig(),this._options.cache("dropDownOptions"));this._popup=this._createComponent(this._$popup,zn,t),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_setPopupContentId(t){this._popupContentId="dx-"+new ut,this.setAria("id",this._popupContentId,t)},_contentReadyHandler:_,_popupConfig:function(){return{onInitialized:this._popupInitializedHandler(),position:d(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>me(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:t=>this._closeOutsideDropDownHandler(t),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_wrapperClassExternal:nt}},_popupInitializedHandler:function(){return this.option("onPopupInitialized")?t=>{this._popupInitializedAction({popup:t.component})}:null},_dimensionChanged:function(){var t=Za(this.option("dropDownOptions.width"));t===void 0&&this._setPopupOption("width",()=>me(this.$element()))},_popupPositionedHandler:function(t){var{labelMode:e,stylingMode:i}=this.option(),n=this._popup.$overlayContent(),a=t.position.v.flip,s=e!=="hidden"&&i==="outlined";if(t.position&&n.toggleClass(ts,a),a&&s&&this._label.isVisible()){var r=this._label.$element();j(n,{top:Tt(n).top-parseInt(r.css("fontSize"))})}},_popupShowingHandler:_,_popupHidingHandler:function(){this.option("opened",!1)},_popupShownHandler:function(){var t;this._openAction(),(t=this._validationMessage)===null||t===void 0||t.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler:function(){var t;this._closeAction(),(t=this._validationMessage)===null||t===void 0||t.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide:function(){var t=this.option("validationMessagePosition");if(t!=="auto")return t;var e="bottom";if(this._popup&&this._popup.option("visible")){var{top:i}=Ft.setup(this.$element()),{top:n}=Ft.setup(this._popup.$content());e=i+this.option("popupPosition").offset.v>n?"bottom":"top"}return e},_closeOutsideDropDownHandler:function(t){var{target:e}=t,i=l(e),n=this.getButton("dropDown"),a=n&&n.$element(),s=!!i.closest(this.$element()).length,r=!!i.closest(a).length,u=!s&&!r;return u},_clean:function(){delete this._openOnFieldClickAction,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption:function(t,e){this._setWidgetOption("_popup",arguments)},_validatedOpening:function(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems:function(){return this.option("applyValueMode")==="useButtons"?this._popupToolbarItemsConfig():[]},_getFirstPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-done.dx-button")},_getLastPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-cancel.dx-button")},_popupElementTabHandler:function(t){var e=l(t.currentTarget);(t.shiftKey&&e.is(this._getFirstPopupElement())||!t.shiftKey&&e.is(this._getLastPopupElement()))&&(h.trigger(this._input(),"focus"),t.preventDefault())},_popupElementEscHandler:function(){h.trigger(this._input(),"focus"),this.close()},_popupButtonInitializedHandler:function(t){t.component.registerKeyHandler("tab",this._popupElementTabHandler.bind(this)),t.component.registerKeyHandler("escape",this._popupElementEscHandler.bind(this))},_popupToolbarItemsConfig:function(){var t=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}}];return this._applyButtonsLocation(t)},_applyButtonsLocation:function(t){var e=this.option("buttonsLocation"),i=t;if(e!=="default"){var n=Si(e);S(i,function(a,s){d(s,{toolbar:n[0],location:n[1]})})}return i},_applyButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged:function(t){var e=Ie.getOptionsFromContainer(t);this._setPopupOption(e);var i=Object.keys(e);(i.indexOf("width")!==-1||i.indexOf("height")!==-1)&&this._dimensionChanged()},_renderSubmitElement:function(){this.option("useHiddenSubmitElement")&&(this._$submitElement=l("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue:function(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement:function(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose:function(){this._detachFocusOutEvents(),this.callBase()},_optionChanged:function(t){var e;switch(t.name){case"width":case"height":this.callBase(t),(e=this._popup)===null||e===void 0||e.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":m(t.value)?this._renderField():this._invalidate();break;case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(t),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":k()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(t.value),this.callBase(t);break;default:this.callBase(t)}},open:function(){this.option("opened",!0)},close:function(){this.option("opened",!1)},field:function(){return N(this._input())},content:function(){return this._popup?this._popup.content():null}});V("dxDropDownEditor",Xe);const as=Xe;var ss=d({},Ti,{_dataExpressionDefaultOptions:function(){return{items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}},_initDataExpressions:function(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource:function(){this.option("dataSource")||(this._dataSource=new Oi({store:new Ai(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter:function(){this._displayGetter=zt(this._displayGetterExpr())},_displayGetterExpr:function(){return this.option("displayExpr")},_compileValueGetter:function(){this._valueGetter=zt(this._valueGetterExpr())},_valueGetterExpr:function(){return this.option("valueExpr")||"this"},_loadValue:function(t){var e=new R;return t=this._unwrappedValue(t),m(t)?(this._loadSingle(this._valueGetterExpr(),t).done(function(i){this._isValueEquals(this._valueGetter(i),t)?e.resolve(i):e.reject()}.bind(this)).fail(function(){e.reject()}),this._loadValueDeferred=e,e.promise()):e.reject().promise()},_rejectValueLoading:function(){var t;(t=this._loadValueDeferred)===null||t===void 0||t.reject({shouldSkipCallback:!0})},_getCurrentValue:function(){return this.option("value")},_unwrappedValue:function(t){var e;return t=(e=t)!==null&&e!==void 0?e:this._getCurrentValue(),t&&this._dataSource&&this._valueGetterExpr()==="this"&&(t=this._getItemKey(t)),Wt.unwrap(t)},_getItemKey:function(t){var e=this._dataSource.key();if(Array.isArray(e)){for(var i={},n=0,a=e.length;n<a;n++)i[e[n]]=t[e[n]];return i}return e&&typeof t=="object"&&(t=t[e]),t},_isValueEquals:function(t,e){var i=this._dataSource&&this._dataSource.key(),n=this._compareValues(t,e);return!n&&i&&m(t)&&m(e)&&(Array.isArray(i)?n=this._compareByCompositeKey(t,e,i):n=this._compareByKey(t,e,i)),n},_compareByCompositeKey:function(t,e,i){var n=Ot;if(!n(t)||!n(e))return!1;for(var a=0,s=i.length;a<s;a++)if(t[i[a]]!==e[i[a]])return!1;return!0},_compareByKey:function(t,e,i){var n=Wt.unwrap,a=Y(n(t[i]),t),s=Y(n(e[i]),e);return this._compareValues(a,s)},_compareValues:function(t,e){return Kt(t,!0)===Kt(e,!0)},_initDynamicTemplates:_,_setCollectionWidgetItemTemplate:function(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr:function(){var t=this.option("valueExpr"),e=xi(t)&&t!=="this"||at(t);return e?t:null},_dataExpressionOptionChanged:function(t){switch(t.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}});const Ee=ss;var be=K(),os=".dx-list-item",rs="dxListItemData",ls="dx-dropdownlist-popup-wrapper",hs="input",us=["startswith","contains","endwith","notcontains"],ye=E.real().platform!=="android",Ye=as.inherit({_supportedKeys:function(){var t=this.callBase();return d({},t,{tab:function(e){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(e);var i=l(this._list.option("focusedElement"));i.length&&this._setSelectedElement(i)}t.tab.apply(this,arguments)},space:_,home:_,end:_})},_allowSelectItemByTab:function(){return this.option("opened")&&this.option("applyValueMode")==="instantly"},_setSelectedElement:function(t){var e=this._valueGetter(this._list._getItemData(t));this._setValue(e)},_setValue:function(t){this.option("value",t)},_getDefaultOptions:function(){return d(this.callBase(),d(Ee._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:P.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:_,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference:function(){this.callBase(),d(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init:function(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange:function(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems:function(){var t=this.option().items;t&&!t.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions:function(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction:function(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction:function(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction:function(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Ii("item")})},_isEditable:function(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget:function(t){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:function(t,e,i){return t>i?e:t<e?i:t},_items:function(){var t=this._getPlainItems(!this._list&&this._dataSource.items()),e=new Bi(t).filter("disabled","<>",!0).toArray();return e},_calcNextItem:function(t){var e=this._items(),i=this._fitIntoRange(this._getSelectedIndex()+t,0,e.length-1);return e[i]},_getSelectedIndex:function(){var t=this._items(),e=this.option("selectedItem"),i=-1;return S(t,function(n,a){if(this._isValueEquals(a,e))return i=n,!1}.bind(this)),i},_createPopup:function(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());var t=this._popup.$content();h.off(t,"mouseup"),h.on(t,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer:function(){var t=this.option("dropDownOptions.container"),e=t&&l(t);if(e&&e.length&&!L(e.get(0))){var i=[].slice.call(e.parents());i.unshift(e.get(0)),S(i,function(n,a){if(a===l("body").get(0))return!1;if(be.getComputedStyle(a).overflowY==="hidden")return this._$customBoundaryContainer=l(a),!1}.bind(this))}},_popupWrapperClass:function(){return ls},_renderInputValue:function(){var t=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(t,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,t))},_loadInputValue:function(t,e){return this._loadItem(t).always(e)},_getItemFromPlain:function(t,e){var i,n;return e&&typeof t!="object"&&(e.itemByValue||(e.itemByValue={},i=this._getPlainItems(),i.forEach(function(a){e.itemByValue[this._valueGetter(a)]=a},this)),n=e.itemByValue[t]),n||(i=this._getPlainItems(),n=wi(i,function(a){return this._isValueEquals(this._valueGetter(a),t)}.bind(this))[0]),n},_loadItem:function(t,e){var i=this._getItemFromPlain(t,e);return i!==void 0?new R().resolve(i).promise():this._loadValue(t)},_getPlainItems:function(t){var e=[];t=t||this.option("items")||this._dataSource.items()||[];for(var i=0;i<t.length;i++)t[i]&&t[i].items?e=e.concat(t[i].items):e.push(t[i]);return e},_updateActiveDescendant(){var t,e=this.option("opened"),i=(t=this._list)===null||t===void 0?void 0:t.getFocusedItemId(),n=l("#".concat(i)).length>0,a=e&&n&&i;this.setAria({activedescendant:a||null})},_setSelectedItem:function(t){var e=this._displayValue(t);this.option("selectedItem",Y(t,null)),this.option("displayValue",e)},_displayValue:function(t){return this._displayGetter(t)},_refreshSelected:function(){var t={};this._listItemElements().each(function(e,i){var n=l(i),a=this._valueGetter(n.data(rs)),s=this._isSelectedValue(a,t);s?this._list.selectItem(n):this._list.unselectItem(n)}.bind(this))},_popupShownHandler:function(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy:function(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)},_isSelectedValue:function(t){return this._isValueEquals(t,this.option("value"))},_validateSearchMode:function(){var t=this.option("searchMode"),e=t.toLowerCase();if(!us.includes(e))throw D.Error("E1019",t)},_clearSelectedItem:function(){this.option("selectedItem",null)},_processDataSourceChanging:function(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(function(){this._isCustomValueAllowed()||this._clearSelectedItem()}.bind(this))},_isCustomValueAllowed:function(){return this.option("displayCustomValue")},reset:function(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements:function(){return this._$list?this._$list.find(os):l()},_popupConfig:function(){return d(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent:function(){this.callBase(),this._renderList()},_getKeyboardListeners(){var t=this._canListHaveFocus();return this.callBase().concat([!t&&this._list])},_setAriaTargetForList:function(){this._list._getAriaTarget=this._getAriaTarget.bind(this)},_renderList:function(){this._listId="dx-"+new ut()._value;var t=this._$list=l("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._list=this._createComponent(t,Di,this._listConfig()),this._refreshList(),this._setAriaTargetForList(),this._list.option("_listAttributes",{role:"combobox"}),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick:function(){var t=f("mousedown","dxDropDownList");h.off(this._$list,t),h.on(this._$list,t,e=>e.preventDefault())},_getControlsAria(){return this._list&&this._listId},_renderOpenedState:function(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_setDefaultAria:function(){this.setAria({haspopup:"listbox",autocomplete:"list"})},_refreshList:function(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource:function(){var t=!!this._list.option("dataSource");return t!==this._needPassDataSourceToList()},_isDesktopDevice:function(){return E.real().deviceType==="desktop"},_listConfig:function(){var t={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:this._isDesktopDevice()?this.option("hoverStateEnabled"):!1,focusStateEnabled:this._isDesktopDevice()?this.option("focusStateEnabled"):!1};return this._canListHaveFocus()||(t.tabIndex=null),t},_canListHaveFocus:()=>!1,_getDataSource:function(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:function(){return{paginate:!1}},_getGroupedOption:function(){return this.option("grouped")},_dataSourceFromUrlLoadMode:function(){return"raw"},_listContentReadyHandler:function(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._dimensionChanged(),this._contentReadyAction()},_setListOption:function(t,e){this._setWidgetOption("_list",arguments)},_listItemClickAction:function(t){this._listItemClickHandler(t),this._itemClickAction(t)},_listItemClickHandler:_,_setListDataSource:function(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList:function(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded:function(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter:function(){return this._canKeepDataSource()?!1:this._needPassDataSourceToList()},_canKeepDataSource:function(){var t=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!t&&!this._isLastMinSearchLengthExceeded},_searchValue:function(){return this._input().val()||""},_getSearchEvent:function(){return f(hs,this.NAME+"Search")},_getCompositionStartEvent:function(){return f("compositionstart",this.NAME+"CompositionStart")},_getCompositionEndEvent:function(){return f("compositionend",this.NAME+"CompositionEnd")},_getSetFocusPolicyEvent:function(){return f("input",this.NAME+"FocusPolicy")},_renderEvents:function(){this.callBase(),h.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(h.on(this._input(),this._getSearchEvent(),t=>{this._searchHandler(t)}),ye&&(h.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),h.on(this._input(),this._getCompositionEndEvent(),t=>{this._isTextCompositionInProgress(void 0),this._searchHandler(t,this._searchValue())})))},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")},_refreshEvents:function(){h.off(this._input(),this._getSearchEvent()),h.off(this._input(),this._getSetFocusPolicyEvent()),ye&&(h.off(this._input(),this._getCompositionStartEvent()),h.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress:function(t){if(arguments.length)this._isTextComposition=t;else return this._isTextComposition},_searchHandler:function(t,e){if(!this._isTextCompositionInProgress()){if(!this._isMinSearchLengthExceeded()){this._searchCanceled();return}var i=this.option("searchTimeout");i?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(e)},i)):this._searchDataSource(e)}},_searchCanceled:function(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._searchValue();this._filterDataSource(t)},_filterDataSource:function(t){this._clearSearchTimer();var e=this._dataController;e.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),e.searchOperation(this.option("searchMode")),e.searchValue(t),e.load().done(this._dataSourceFiltered.bind(this,t))},_clearFilter:function(){var t=this._dataController;t.searchValue()&&t.searchValue(null)},_dataSourceFiltered:function(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup:function(){return this._hasItemsToShow()},_refreshPopupVisibility:function(){if(!(this.option("readOnly")||!this._searchValue())){var t=this._shouldOpenPopup();t&&!this._isFocused()||(this.option("opened",t),t&&this._dimensionChanged())}},_dataSourceChangedHandler:function(t){this._dataController.pageIndex()===0?this.option().items=t:this.option().items=this.option().items.concat(t)},_hasItemsToShow:function(){var t=this._dataController,e=t.items()||[],i=e.length,n=this._needPassDataSourceToList();return!!(n&&i)},_clearSearchTimer:function(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler:function(){this._dimensionChanged()},_dimensionChanged:function(){this.callBase(arguments),this._popup&&this._updatePopupDimensions()},_needPopupRepaint:function(){var t=this._dataController,e=t.pageIndex(),i=m(this._pageIndex)&&e<=this._pageIndex||t.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=e,i},_updatePopupDimensions:function(){this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions()},_getMaxHeight:function(){var t=this.$element(),e=this._$customBoundaryContainer,i=t.offset().top-(e?e.offset().top:0),n=I(be),a=e?Math.min(I(e),n):n,s=Math.max(i,a-i-I(t));return Math.min(.5*a,s)},_clean:function(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose:function(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption:function(){this._setListOption.apply(this,arguments)},_setSubmitValue:function(){var t=this.option("value"),e=this._shouldUseDisplayValue(t)?this._displayGetter(t):t;this._getSubmitElement().val(e)},_shouldUseDisplayValue:function(t){return this.option("valueExpr")==="this"&&Ot(t)},_optionChanged:function(t){switch(this._dataExpressionOptionChanged(t),t.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(t.name,t.value),this.callBase(t);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(t.name);break;case"displayValue":this.option("text",t.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":t.previousValue!==t.value&&this._selectionChangedAction({selectedItem:t.value});break;default:this.callBase(t)}}}).include(Ee,ki);V("dxDropDownList",Ye);const ds=Ye;var cs=".dx-state-disabled",ps="dx-selectbox",_s="dx-selectbox-popup",fs="dx-selectbox-container",Se="dx-selectbox-popup-wrapper",qe=ds.inherit({_supportedKeys:function(){var t=this,e=this.callBase(),i=function(a){var s=this._isEditable();s?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(a.preventDefault(),this.reset()),this._savedTextRemoveEvent=a,this._preventSubstitution=!0},n=function(){t.option("searchEnabled")&&t._valueSubstituted()&&t._searchHandler()};return d({},e,{tab:function(){this.option("opened")&&this.option("applyValueMode")==="instantly"&&this._resetCaretPosition(!0),e.tab&&e.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow:function(a){if(e.upArrow&&e.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(a),!0},downArrow:function(a){if(e.downArrow&&e.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(a),!0},leftArrow:function(){n(),e.leftArrow&&e.leftArrow.apply(this,arguments)},rightArrow:function(){n(),e.rightArrow&&e.rightArrow.apply(this,arguments)},home:function(){n(),e.home&&e.home.apply(this,arguments)},end:function(){n(),e.end&&e.end.apply(this,arguments)},escape:function(){var a=e.escape&&e.escape.apply(this,arguments);return this._cancelEditing(),a??!0},enter:function(a){var s=this.option("opened"),r=this._input().val().trim(),u=r&&this._list&&!this._list.option("focusedElement");if(!r&&m(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(a),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return a.preventDefault(),u&&(s&&this._toggleOpenState(),this._valueChangeEventHandler(a)),s;if(e.enter&&e.enter.apply(this,arguments))return s}},space:function(a){var s=this.option("opened"),r=this.option("searchEnabled"),u=this.option("acceptCustomValue");if(!(!s||r||u))return a.preventDefault(),this._valueChangeEventHandler(a),!0},backspace:i,del:i})},_getDefaultOptions:function(){return d(this.callBase(),{placeholder:P.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating:function(t){m(t.customItem)||(t.customItem=t.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init:function(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup:function(){this.$element().addClass(ps),this._renderTooltip(),this.callBase(),this._$container.addClass(fs)},_createPopup:function(){this.callBase(),this._popup.$element().addClass(_s),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass:function(){return this.callBase()+" "+Se},_setDeprecatedOptions(){this.callBase(),d(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing:function(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState:function(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement:function(){var t,e=this._searchValue();if(!e){this._focusListElement(null);return}var{items:i,selectedItem:n}=this.option(),a=this._list._itemElements(),s=(t=i==null?void 0:i.indexOf(n))!==null&&t!==void 0?t:-1,r=s!==-1&&!this._isCustomItemSelected()?a.eq(s):null;this._focusListElement(r)},_renderFocusedElement:function(){if(this._list){var t=this._searchValue();if(!t||this.option("acceptCustomValue")){this._focusListElement(null);return}var e=this._list._itemElements(),i=e.not(cs).eq(0);this._focusListElement(i)}},_focusListElement:function(t){this._preventInputValueRender=!0,this._list.option("focusedElement",N(t)),delete this._preventInputValueRender},_scrollToSelectedItem:function(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler:function(){this.callBase();var t=this._dataController.paginate();t&&this._needPopupRepaint()||this._scrollToSelectedItem()},_renderValue:function(){return this._renderInputValue(),this._setSubmitValue(),new R().resolve()},_renderInputValue:function(){return this.callBase().always(function(){this._renderInputValueAsync()}.bind(this))},_renderInputValueAsync:function(){this._renderTooltip(),this._renderInputValueImpl().always(function(){this._refreshSelected()}.bind(this))},_renderInputValueImpl:function(){return this._renderField(),new R().resolve()},_setNextItem:function(t){var e=this._calcNextItem(t),i=this._valueGetter(e);this._setValue(i)},_setNextValue:function(t){var e=this._dataController.isLoaded()?new R().resolve():this._dataController.load();e.done(function(){var i=this._getSelectedIndex(),n=this._dataController.pageSize(),a=this._dataController.isLastPage(),s=i===this._items().length-1;this._saveValueChangeEvent(t);var r=F(t)==="downArrow"?1:-1;n&&!a&&s&&r>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,r))):this._setNextItem(r)}.bind(this))},_setSelectedItem:function(t){var e=!this._isCustomValueAllowed()&&t===void 0;this.callBase(e?null:t),!e&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed:function(){return this.option("acceptCustomValue")||this.callBase()},_displayValue:function(t){return t=!m(t)&&this._isCustomValueAllowed()?this.option("value"):t,this.callBase(t)},_listConfig:function(){var t=d(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&d(t,{showSelectionControls:!0,selectionByClick:!0}),t},_listFocusedItemChangeHandler:function(t){if(!this._preventInputValueRender){var e=t.component,i=l(e.option("focusedElement")),n=e._getItemData(i);this._updateField(n)}},_updateField:function(t){var e=this._getTemplateByOption("fieldTemplate");if(!(e&&this.option("fieldTemplate"))){var i=this._displayGetter(t);this.option("text",i),this._renderDisplayText(i);return}this._renderField()},_getSelectionChangeHandler:function(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):_},_selectionChangeHandler:function(t){S(t.addedItems||[],function(e,i){this._setValue(this._valueGetter(i))}.bind(this))},_getActualSearchValue:function(){return this._dataController.searchValue()},_toggleOpenState:function(t){if(!this.option("disabled")){if(t=arguments.length?t:!this.option("opened"),!t&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&t){this._wasSearch(!1);var e=this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded();if(e&&this._dataController.getDataSource()){if(this._searchTimer)return;var i=this._getActualSearchValue();i&&this._wasSearch(!0),this._filterDataSource(i||null)}else this._setListOption("items",[])}t&&this._scrollToSelectedItem(),this.callBase(t)}},_renderTooltip:function(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions:function(){this.callBase(),this._dimensionChanged()},_isValueEqualInputText:function(){var t=this.option("selectedItem");if(t===null)return!1;var e=this._displayGetter(t),i=e?String(e):"",n=this._searchValue();return i===n},_popupHidingHandler:function(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler:function(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText:function(t){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always(function(){var{acceptCustomValue:e,text:i,selectedItem:n}=this.option();if(e){!t&&!this._isValueChanging&&(this._updateField(n??this._createCustomItem(i)),this._clearFilter());return}if(this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")){this._clearTextValue();return}this._isValueEqualInputText()||this._renderInputValue().always(function(a){var s=Y(a,n);this._setSelectedItem(s),this._updateField(s),this._clearFilter()}.bind(this))}.bind(this))},_valueChangeEventIncludesBlur:function(){var t=this.option(this._getValueChangeEventOptionName());return t.includes("blur")},_isPreventedFocusOutEvent:function(t){return this._preventNestedFocusEvent(t)||this._valueChangeEventIncludesBlur()},_focusOutHandler:function(t){if(!this._isPreventedFocusOutEvent(t)){var e=this._isOverlayNestedTarget(t.relatedTarget);e||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(t)}t.target=this._input().get(0),this.callBase(t)},_cancelSearchIfNeed:function(t){var{searchEnabled:e}=this.option(),i=this._isOverlayNestedTarget(t==null?void 0:t.relatedTarget),n=this._wasSearch()&&e&&!i;if(n){var a,s=(a=this._popup)===null||a===void 0?void 0:a._hideAnimationProcessing;this._clearSearchTimer(),s?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch:function(t){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=t},_isOverlayNestedTarget:function(t){return!!l(t).closest(".".concat(Se)).length},_clearTextValue:function(){this.option("selectedItem")&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup:function(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused:function(){var t=W.getActiveElement(this.element());return this.callBase()&&l(t).closest(this._input()).length>0},_getValueChangeEventOptionName:function(){return"customItemCreateEvent"},_renderValueChangeEvent:function(){this._isEditable()&&this.callBase()},_fieldRenderData:function(){var t=this._list&&this.option("opened")&&l(this._list.option("focusedElement"));return t&&t.length?this._list._getItemData(t):this.option("selectedItem")},_isSelectedValue:function(t){return this._isValueEquals(t,this.option("value"))},_shouldCloseOnItemClick:function(){return!(this.option("showSelectionControls")&&this.option("selectionMode")!=="single")},_listItemClickHandler:function(t){var e=this._getCurrentValue();this._focusListElement(l(t.itemElement)),this._saveValueChangeEvent(t.event),this._completeSelection(this._valueGetter(t.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&e===this._valueGetter(t.itemData)&&this._updateField(t.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter:function(){return this._wasSearch()},_completeSelection:function(t){this._setValue(t)},_loadItem:function(t,e){var i=this,n=new R;return this.callBase(t,e).done(function(a){n.resolve(a)}.bind(this)).fail(function(a){if(!(a!=null&&a.shouldSkipCallback)){var s=i.option("selectedItem");i.option("acceptCustomValue")&&t===i._valueGetter(s)?n.resolve(s):n.reject()}}.bind(this)),n.promise()},_loadInputValue:function(t,e){return this._loadItemDeferred=this._loadItem(t).always(e),this._loadItemDeferred},_isCustomItemSelected:function(){var t=this.option("selectedItem"),e=this._searchValue(),i=this._displayGetter(t);return!i||e!==i.toString()},_valueChangeEventHandler:function(t){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(t))},_initCustomItemCreatingAction:function(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem:function(t){var e={text:t},i=this._customItemCreatingAction(e),n=Y(i,e.customItem);return m(i)&&Gt.log("W0015","onCustomItemCreating","customItem"),n},_customItemAddedHandler:function(t){var e=this._searchValue(),i=this._createCustomItem(e);if(this._saveValueChangeEvent(t),i===void 0)throw this._renderValue(),Gt.Error("E0121");Vi(i)?Ri(i).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(i)},_setCustomItem:function(t){this._disposed||(t=t||null,this.option("selectedItem",t),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(t)),this._renderDisplayText(this._displayGetter(t)),this._isValueChanging=!1)},_clearValueHandler:function(t){return this._preventFiltering=!0,this.callBase(t),this._searchCanceled(),!1},_wasSearch:function(t){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=t},_searchHandler:function(){if(this._preventFiltering){delete this._preventFiltering;return}this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments)},_dataSourceFiltered:function(t){this.callBase(),t!==null&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted:function(){var t=this._input().get(0),e=this._searchValue().length,i=t.selectionStart===0&&t.selectionEnd===e,n=t.selectionStart!==t.selectionEnd,a=e===t.selectionEnd;return this._wasSearch()&&n&&!i&&a&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered:function(){return!this._preventSubstitution&&this.option("searchEnabled")&&!this.option("acceptCustomValue")&&this.option("searchMode")==="startswith"},_renderInputSubstitution:function(){if(!this._shouldSubstitutionBeRendered()){delete this._preventSubstitution;return}var t=this._list&&this._getPlainItems(this._list.option("items"))[0];if(t){var e=this._input(),i=e.val().length;if(i!==0){var n=e.get(0),a=this._displayGetter(t).toString();n.value=a,this._caret({start:i,end:a.length})}}},_dispose:function(){this._renderInputValueAsync=_,delete this._loadItemDeferred,this.callBase()},_optionChanged:function(t){switch(t.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(t)}}});V("dxSelectBox",qe);const vs=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"})),ms=Pi(vs);/*!
 * devextreme-react
 * Version: 22.2.3
 * Build date: Mon Dec 05 2022
 *
 * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-react
 */var g=Ut&&Ut.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(e,i);function n(){this.constructor=e}e.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(p,"__esModule",{value:!0});p.ToolbarItem=p.To=p.Show=p.Position=p.Options=p.Offset=p.My=p.Item=p.Hide=p.From=p.DropDownOptions=p.Collision=p.Button=p.BoundaryOffset=p.At=p.Animation=Ze=p.SelectBox=void 0;var gs=ms,o=Mi,Cs=$i,C=Hi,wt=function(t){g(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i._WidgetClass=gs.default,i.subscribableOptions=["opened","value"],i.independentEvents=["onChange","onClosed","onContentReady","onCopy","onCustomItemCreating","onCut","onDisposing","onEnterKey","onFocusIn","onFocusOut","onInitialized","onInput","onItemClick","onKeyDown","onKeyUp","onOpened","onPaste","onValueChanged"],i._defaults={defaultOpened:"opened",defaultValue:"value"},i._expectedChildren={button:{optionName:"buttons",isCollectionItem:!0},dropDownOptions:{optionName:"dropDownOptions",isCollectionItem:!1},item:{optionName:"items",isCollectionItem:!0}},i._templateProps=[{tmplOption:"dropDownButtonTemplate",render:"dropDownButtonRender",component:"dropDownButtonComponent",keyFn:"dropDownButtonKeyFn"},{tmplOption:"fieldTemplate",render:"fieldRender",component:"fieldComponent",keyFn:"fieldKeyFn"},{tmplOption:"groupTemplate",render:"groupRender",component:"groupComponent",keyFn:"groupKeyFn"},{tmplOption:"itemTemplate",render:"itemRender",component:"itemComponent",keyFn:"itemKeyFn"}],i}return Object.defineProperty(e.prototype,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e}(Cs.Component),Ze=p.SelectBox=wt;wt.propTypes={acceptCustomValue:o.bool,accessKey:o.string,activeStateEnabled:o.bool,buttons:o.array,customItemCreateEvent:o.string,deferRendering:o.bool,disabled:o.bool,displayExpr:o.oneOfType([o.func,o.string]),displayValue:o.string,dropDownOptions:o.object,elementAttr:o.object,focusStateEnabled:o.bool,grouped:o.bool,height:o.oneOfType([o.func,o.number,o.string]),hint:o.string,hoverStateEnabled:o.bool,isValid:o.bool,items:o.array,label:o.string,labelMode:o.oneOfType([o.string,o.oneOf(["static","floating","hidden"])]),maxLength:o.oneOfType([o.number,o.string]),minSearchLength:o.number,name:o.string,noDataText:o.string,onChange:o.func,onClosed:o.func,onContentReady:o.func,onCopy:o.func,onCustomItemCreating:o.func,onCut:o.func,onDisposing:o.func,onEnterKey:o.func,onFocusIn:o.func,onFocusOut:o.func,onInitialized:o.func,onInput:o.func,onItemClick:o.func,onKeyDown:o.func,onKeyUp:o.func,onOpened:o.func,onOptionChanged:o.func,onPaste:o.func,onSelectionChanged:o.func,onValueChanged:o.func,opened:o.bool,openOnFieldClick:o.bool,placeholder:o.string,readOnly:o.bool,rtlEnabled:o.bool,searchEnabled:o.bool,searchExpr:o.oneOfType([o.array,o.func,o.string]),searchMode:o.oneOfType([o.string,o.oneOf(["contains","startswith"])]),searchTimeout:o.number,showClearButton:o.bool,showDataBeforeSearch:o.bool,showDropDownButton:o.bool,showSelectionControls:o.bool,spellcheck:o.bool,stylingMode:o.oneOfType([o.string,o.oneOf(["outlined","underlined","filled"])]),tabIndex:o.number,text:o.string,useItemTextAsTitle:o.bool,validationErrors:o.array,validationMessageMode:o.oneOfType([o.string,o.oneOf(["always","auto"])]),validationMessagePosition:o.oneOfType([o.string,o.oneOf(["bottom","left","right","top","auto"])]),validationStatus:o.oneOfType([o.string,o.oneOf(["valid","invalid","pending"])]),valueChangeEvent:o.string,valueExpr:o.oneOfType([o.func,o.string]),visible:o.bool,width:o.oneOfType([o.func,o.number,o.string]),wrapItemText:o.bool};var Es=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="animation",e.ExpectedChildren={hide:{optionName:"hide",isCollectionItem:!1},show:{optionName:"show",isCollectionItem:!1}},e}(C.default);p.Animation=Es;var bs=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="at",e}(C.default);p.At=bs;var ys=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="boundaryOffset",e}(C.default);p.BoundaryOffset=ys;var Ss=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="buttons",e.IsCollectionItem=!0,e.ExpectedChildren={options:{optionName:"options",isCollectionItem:!1}},e}(C.default);p.Button=Ss;var Ts=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="collision",e}(C.default);p.Collision=Ts;var Os=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="dropDownOptions",e.DefaultsProps={defaultHeight:"height",defaultPosition:"position",defaultVisible:"visible",defaultWidth:"width"},e.ExpectedChildren={animation:{optionName:"animation",isCollectionItem:!1},position:{optionName:"position",isCollectionItem:!1},toolbarItem:{optionName:"toolbarItems",isCollectionItem:!0}},e.TemplateProps=[{tmplOption:"contentTemplate",render:"contentRender",component:"contentComponent",keyFn:"contentKeyFn"},{tmplOption:"titleTemplate",render:"titleRender",component:"titleComponent",keyFn:"titleKeyFn"}],e}(C.default);p.DropDownOptions=Os;var As=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="from",e.ExpectedChildren={position:{optionName:"position",isCollectionItem:!1}},e}(C.default);p.From=As;var xs=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="hide",e.ExpectedChildren={from:{optionName:"from",isCollectionItem:!1},to:{optionName:"to",isCollectionItem:!1}},e}(C.default);p.Hide=xs;var Is=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="items",e.IsCollectionItem=!0,e.TemplateProps=[{tmplOption:"template",render:"render",component:"component",keyFn:"keyFn"}],e}(C.default);p.Item=Is;var Bs=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="my",e}(C.default);p.My=Bs;var ws=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="offset",e}(C.default);p.Offset=ws;var Ds=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="options",e.TemplateProps=[{tmplOption:"template",render:"render",component:"component",keyFn:"keyFn"}],e}(C.default);p.Options=Ds;var ks=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="position",e}(C.default);p.Position=ks;var Vs=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="show",e}(C.default);p.Show=Vs;var Rs=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="to",e}(C.default);p.To=Rs;var Ps=function(t){g(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.OptionName="toolbarItems",e.IsCollectionItem=!0,e.TemplateProps=[{tmplOption:"menuItemTemplate",render:"menuItemRender",component:"menuItemComponent",keyFn:"menuItemKeyFn"},{tmplOption:"template",render:"render",component:"component",keyFn:"keyFn"}],e}(C.default);p.ToolbarItem=Ps;p.default=wt;function zs(){const t=new Li({store:{type:"array",data:Ni.filter(a=>a.categoria),key:"rota"},group:"categoria"}),e=Fi();function i(a){setTimeout(()=>{a.component.focus()},100)}function n(a){const s="/"+a.selectedItem.rota;e(s)}return bt(Ms,{children:[U($s,{src:zi,alt:"Logo"}),U(Hs,{dataSource:t,displayExpr:"titulo",grouped:!0,itemRender:Ls,noDataText:"Sem dados",onContentReady:i,onSelectionChanged:a=>n(a),placeholder:"Pesquisar",searchEnabled:!0,searchExpr:["rota","titulo","categoria"],valueExpr:"rota"})]})}const Ms=dt("div",{alignItems:"center",display:"flex",flex:"1 1 auto",flexDirection:"column",height:"100%",width:"100%"}),$s=dt("img",{marginBottom:64,marginTop:64,width:480}),Hs=dt(Ze,{width:480});function Ls(t){return bt(Ns,{children:[U("img",{src:t.icone,alt:t.titulo,height:24}),bt("div",{children:[U("b",{children:t.titulo}),U("p",{children:t.descricao})]})]})}const Ns=dt("div",{display:"flex",alignItems:"center",gap:"8px",width:"100%","> div":{whiteSpace:"normal"}});export{zs as PaginaInicial};
